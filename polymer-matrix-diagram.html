<!--
	POLYMER-MATRIX-DIAGRAM

	DESCRIPTION:
		- `polymer-matrix-diagram` is a UI element for displaying matrix diagrams.

	EXAMPLE:
		<polymer-matrix-diagram id="chart"></polymer-matrix-diagram>
		...
		var chart = this.$.chart;

	@element polymer-matrix-diagram
	@status unstable
--><!-- POLYMER --><html><head><link rel="import" href="../polymer/polymer.html">

<!-- DEPENDENCIES -->
<link rel="import" href="../polymer-uuid/polymer-uuid.html">
<link rel="import" href="../polymer-d3/polymer-d3.html">

<!-- ELEMENT -->
</head><body><polymer-element name="polymer-matrix-diagram" attributes="data rowOrder colOrder config width height paddingLeft paddingRight paddingBottom paddingTop xLabel yLabel zValue zMin zMax cValue colorOrder colors duration autoResize autoUpdate isBrushable isSortableRows isSortableCols" assetpath="build/">

	<template>

		<!-- STYLESHEETS -->
		<style>/* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
	display: block;
}
body {
	line-height: 1;
}
ol, ul {
	list-style: none;
}
blockquote, q {
	quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}</style>
		<style>/* COLORS */

[data-color="basic-vertex"] {
	fill: #474747;
}

[data-color="basic-edge"] {
	stroke: #474747;
}

/* D3: Category10 */
.category10-1,
[data-color="category10-1"] {
	fill: #1f77b4;
}
.category10-2,
[data-color="category10-2"] {
	fill: #ff7f0e;
}
.category10-3,
[data-color="category10-3"] {
	fill: #2ca02c;
}
.category10-4,
[data-color="category10-4"] {
	fill: #d62728;
}
.category10-5,
[data-color="category10-5"] {
	fill: #9467bd;
}
.category10-6,
[data-color="category10-6"] {
	fill: #8c564b;
}
.category10-7,
[data-color="category10-7"] {
	fill: #e377c2;
}
.category10-8,
[data-color="category10-8"] {
	fill: #7f7f7f;
}
.category10-9,
[data-color="category10-9"] {
	fill: #bcdb22;
}
.category10-10,
[data-color="category10-10"] {
	fill: #17becf;
}

/* D3: category20 */
.category20-1,
[data-color="category20-1"] {
	fill: #1f77b4;
}
.category20-2,
[data-color="category20-2"] {
	fill: #aec7e8;
}
.category20-3,
[data-color="category20-3"] {
	fill: #ff7f0e;
}
.category20-4,
[data-color="category20-4"] {
	fill: #ffbb78;
}
.category20-5,
[data-color="category20-5"] {
	fill: #2ca02c;
}
.category20-6,
[data-color="category20-6"] {
	fill: #98df8a;
}
.category20-7,
[data-color="category20-7"] {
	fill: #d62728;
}
.category20-8,
[data-color="category20-8"] {
	fill: #ff9896;
}
.category20-9,
[data-color="category20-9"] {
	fill: #9467bd;
}
.category20-10,
[data-color="category20-10"] {
	fill: #c5b0d5;
}
.category20-11,
[data-color="category20-11"] {
	fill: #8c564b;
}
.category20-12,
[data-color="category20-12"] {
	fill: #c49c94;
}
.category20-13,
[data-color="category20-13"] {
	fill: #e377c2;
}
.category20-14,
[data-color="category20-14"] {
	fill: #f7b6d2;
}
.category20-15,
[data-color="category20-15"] {
	fill: #7f7f7f;
}
.category20-16,
[data-color="category20-16"] {
	fill: #c7c7c7;
}
.category20-17,
[data-color="category20-17"] {
	fill: #bcbd22;
}
.category20-18,
[data-color="category20-18"] {
	fill: #dbdb8d;
}
.category20-19,
[data-color="category20-19"] {
	fill: #17becf;
}
.category20-20,
[data-color="category20-20"] {
	fill: #9edae5;
}

/* D3: category20b */
.category20b-1,
[data-color="category20b-1"] {
	fill: #393b79;
}
.category20b-2,
[data-color="category20b-2"] {
	fill: #5254a3;
}
.category20b-3,
[data-color="category20b-3"] {
	fill: #6b6ecf;
}
.category20b-4,
[data-color="category20b-4"] {
	fill: #9c9ede;
}
.category20b-5,
[data-color="category20b-5"] {
	fill: #637939;
}
.category20b-6,
[data-color="category20b-6"] {
	fill: #8ca252;
}
.category20b-7,
[data-color="category20b-7"] {
	fill: #b5cf6b;
}
.category20b-8,
[data-color="category20b-8"] {
	fill: #cedb9c;
}
.category20b-9,
[data-color="category20b-9"] {
	fill: #8c6d31;
}
.category20b-10,
[data-color="category20b-10"] {
	fill: #bd9e39;
}
.category20b-11,
[data-color="category20b-11"] {
	fill: #e7ba52;
}
.category20b-12,
[data-color="category20b-12"] {
	fill: #e7cb94;
}
.category20b-13,
[data-color="category20b-13"] {
	fill: #843c39;
}
.category20b-14,
[data-color="category20b-14"] {
	fill: #ad494a;
}
.category20b-15,
[data-color="category20b-15"] {
	fill: #d6616b;
}
.category20b-16,
[data-color="category20b-16"] {
	fill: #e7969c;
}
.category20b-17,
[data-color="category20b-17"] {
	fill: #7b4173;
}
.category20b-18,
[data-color="category20b-18"] {
	fill: #a55194;
}
.category20b-19,
[data-color="category20b-19"] {
	fill: #ce6dbd;
}
.category20b-20,
[data-color="category20b-20"] {
	fill: #de9ed6;
}

/* D3: category20c */
.category20c-1,
[data-color="category20c-1"] {
	fill: #3182bd;
}
.category20c-2,
[data-color="category20c-2"] {
	fill: #6baed6;
}
.category20c-3,
[data-color="category20c-3"] {
	fill: #9ecae1;
}
.category20c-4,
[data-color="category20c-4"] {
	fill: #c6dbef;
}
.category20c-5,
[data-color="category20c-5"] {
	fill: #e6550d;
}
.category20c-6,
[data-color="category20c-6"] {
	fill: #fd8d3c;
}
.category20c-7,
[data-color="category20c-7"] {
	fill: #fdae6b;
}
.category20c-8,
[data-color="category20c-8"] {
	fill: #fdd0a2;
}
.category20c-9,
[data-color="category20c-9"] {
	fill: #31a354;
}
.category20c-10,
[data-color="category20c-10"] {
	fill: #74c476;
}
.category20c-11,
[data-color="category20c-11"] {
	fill: #a1d99b;
}
.category20c-12,
[data-color="category20c-12"] {
	fill: #c7e9c0;
}
.category20c-13,
[data-color="category20c-13"] {
	fill: #756bb1;
}
.category20c-14,
[data-color="category20c-14"] {
	fill: #9e9ac8;
}
.category20c-15,
[data-color="category20c-15"] {
	fill: #bcbddc;
}
.category20c-16,
[data-color="category20c-16"] {
	fill: #dadaeb;
}
.category20c-17,
[data-color="category20c-17"] {
	fill: #636363;
}
.category20c-18,
[data-color="category20c-18"] {
	fill: #969696;
}
.category20c-19,
[data-color="category20c-19"] {
	fill: #bdbdbd;
}
.category20c-20,
[data-color="category20c-20"] {
	fill: #d9d9d9;
}





/* D3: Category10 */
.category10-1-span {
	background-color: #1f77b4;
}
.category10-2-span {
	background-color: #ff7f0e;
}
.category10-3-span {
	background-color: #2ca02c;
}
.category10-4-span {
	background-color: #d62728;
}
.category10-5-span {
	background-color: #9467bd;
}
.category10-6-span {
	background-color: #8c564b;
}
.category10-7-span {
	background-color: #e377c2;
}
.category10-8-span {
	background-color: #7f7f7f;
}
.category10-9-span {
	background-color: #bcdb22;
}
.category10-10-span {
	background-color: #17becf;
}

/* D3: category20 */
.category20-1-span {
	background-color: #1f77b4;
}
.category20-2-span {
	background-color: #aec7e8;
}
.category20-3-span {
	background-color: #ff7f0e;
}
.category20-4-span {
	background-color: #ffbb78;
}
.category20-5-span {
	background-color: #2ca02c;
}
.category20-6-span {
	background-color: #98df8a;
}
.category20-7-span {
	background-color: #d62728;
}
.category20-8-span {
	background-color: #ff9896;
}
.category20-9-span {
	background-color: #9467bd;
}
.category20-10-span {
	background-color: #c5b0d5;
}
.category20-11-span {
	background-color: #8c564b;
}
.category20-12-span {
	background-color: #c49c94;
}
.category20-13-span {
	background-color: #e377c2;
}
.category20-14-span {
	background-color: #f7b6d2;
}
.category20-15-span {
	background-color: #7f7f7f;
}
.category20-16-span {
	background-color: #c7c7c7;
}
.category20-17-span {
	background-color: #bcbd22;
}
.category20-18-span {
	background-color: #dbdb8d;
}
.category20-19-span {
	background-color: #17becf;
}
.category20-20-span {
	background-color: #9edae5;
}

/* D3: category20b */
.category20b-1-span {
	background-color: #393b79;
}
.category20b-2-span {
	background-color: #5254a3;
}
.category20b-3-span {
	background-color: #6b6ecf;
}
.category20b-4-span {
	background-color: #9c9ede;
}
.category20b-5-span {
	background-color: #637939;
}
.category20b-6-span {
	background-color: #8ca252;
}
.category20b-7-span {
	background-color: #b5cf6b;
}
.category20b-8-span {
	background-color: #cedb9c;
}
.category20b-9-span {
	background-color: #8c6d31;
}
.category20b-10-span {
	background-color: #bd9e39;
}
.category20b-11-span {
	background-color: #e7ba52;
}
.category20b-12-span {
	background-color: #e7cb94;
}
.category20b-13-span {
	background-color: #843c39;
}
.category20b-14-span {
	background-color: #ad494a;
}
.category20b-15-span {
	background-color: #d6616b;
}
.category20b-16-span {
	background-color: #e7969c;
}
.category20b-17-span {
	background-color: #7b4173;
}
.category20b-18-span {
	background-color: #a55194;
}
.category20b-19-span {
	background-color: #ce6dbd;
}
.category20b-20-span {
	background-color: #de9ed6;
}

/* D3: category20c */
.category20c-1-span {
	background-color: #3182bd;
}
.category20c-2-span {
	background-color: #6baed6;
}
.category20c-3-span {
	background-color: #9ecae1;
}
.category20c-4-span {
	background-color: #c6dbef;
}
.category20c-5-span {
	background-color: #e6550d;
}
.category20c-6-span {
	background-color: #fd8d3c;
}
.category20c-7-span {
	background-color: #fdae6b;
}
.category20c-8-span {
	background-color: #fdd0a2;
}
.category20c-9-span {
	background-color: #31a354;
}
.category20c-10-span {
	background-color: #74c476;
}
.category20c-11-span {
	background-color: #a1d99b;
}
.category20c-12-span {
	background-color: #c7e9c0;
}
.category20c-13-span {
	background-color: #756bb1;
}
.category20c-14-span {
	background-color: #9e9ac8;
}
.category20c-15-span {
	background-color: #bcbddc;
}
.category20c-16-span {
	background-color: #dadaeb;
}
.category20c-17-span {
	background-color: #636363;
}
.category20c-18-span {
	background-color: #969696;
}
.category20c-19-span {
	background-color: #bdbdbd;
}
.category20c-20-span {
	background-color: #d9d9d9;
}
</style>
		<style>:host {
	display: block;
	font-family: 'Open-Sans', sans-serif;
}

.noselect {
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}



</style>
		<style>
.canvas {
	display: block;
	margin: 0 auto;
}

.graph .hidden {
	opacity: 0;
}

.background {
	fill: #eee;
	stroke: none;
}

.grid {
	fill: none;
	stroke: #fff;
	stroke-width: 1;
	shape-rendering: crispEdges;
	vector-effect: non-scaling-stroke;
}

.name {
	cursor: pointer;
}

.active .name {
	fill: #ff0000;
}

.axis .label {
	font-size: 18px;
}

.extent {
	fill: #000;
	fill-opacity: .35;
	stroke: #fff;
	stroke-width: 1;
}
</style>
		<style>
/* MEDIA QUERIES */

/* 960 px */
@media screen and (max-width: 960px) {}
</style>

		<!-- PRESENTATION CONTENT -->
		<div class="chart" id="chart"></div>

	</template>

	<!-- REGISTRATION -->
	<script>(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
*
*	CHART
*
*
*	DESCRIPTION:
*		- Defines the chart prototype.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';


// CHART //

/**
* FUNCTION: Chart()
*	Chart constructor.
*
* @constructor
* @returns {Chart} Chart instance
*/
function Chart() {
	if ( !( this instanceof Chart ) ) {
		return new Chart();
	}
	return this;
} // end FUNCTION Chart()


// ATTRIBUTES //

/**
* ATTRIBUTE: paddingLeft
*	Chart canvas left padding.
*
* @type {Null|Number}
* @default null
*/
Chart.prototype.paddingLeft = null;

/**
* ATTRIBUTE: paddingRight
*	Chart canvas right padding.
*
* @type {Null|Number}
* @default null
*/
Chart.prototype.paddingRight = null;

/**
* ATTRIBUTE: paddingBottom
*	Chart canvas bottom padding.
*
* @type {Null|Number}
* @default null
*/
Chart.prototype.paddingBottom = null;

/**
* ATTRIBUTE: paddingTop
*	Chart canvas top padding.
*
* @type {Null|Number}
* @default null
*/
Chart.prototype.paddingTop = null;

/**
* ATTRIBUTE: width
*	Chart canvas width. If not explicitly set, defaults to the width of the parent node.
*
* @type {Number}
* @default null
*/
Chart.prototype.width = null;

/**
* ATTRIBUTE: height
*	Chart canvas height. If not explicitly set, defaults to the height of the parent node.
*
* @type {Number}
* @default null
*/
Chart.prototype.height = null;

/**
* ATTRIBUTE: xLabel
*	Column label.
*
* @type {String}
* @default ''
*/
Chart.prototype.xLabel = '';

/**
* ATTRIBUTE: yLabel
*	Row label.
*
* @type {String}
* @default ''
*/
Chart.prototype.yLabel = '';

/**
* ATTRIBUTE: zValue
*	z-value accessor. If set to a function, the accessor is used to map z-values to a linear scale for fill-opacity.
*
* @type {Number|Function}
* @default 1
*/
Chart.prototype.zValue = 1;

/**
* ATTRIBUTE: zMin
*	Minimum z-limit. If `null`, the limit is computed from the data.
*
* @type {Null|Number}
* @default null
*/
Chart.prototype.zMin = null;

/**
* ATTRIBUTE: zMax
*	Maximum z-limit. If `null`, the limit is computed from the data.
*
* @type {Null|Number}
* @default null
*/
Chart.prototype.zMax = null;

/**
* ATTRIBUTE: cValue( d, i )
*	color-value accessor.
*
* @param {*} d - datum
* @param {Number} i - index
* @returns {Number} 0
*/
Chart.prototype.cValue = function() {
	return 0;
};

/**
* ATTRIBUTE: duration
*	Transition duration.
*
* @type {Number}
* @default 2500 milliseconds
*/
Chart.prototype.duration = 2500; // ms

/**
* ATTRIBUTE: autoUpdate
*	Boolean flag indicating whether a chart should auto update DOM elements whenever an attribute changes.
*
* @type {Boolean}
* @default true
*/
Chart.prototype.autoUpdate = true;

/**
* ATTRIBUTE: autoResize
*	Boolean flag indicating whether a chart should auto resize when the window resizes.
*
* @type {Boolean}
* @default true
*/
Chart.prototype.autoResize = true;

/**
* ATTRIBUTE: isBrushable
*	Boolean flag indicating whether a chart is brushable.
*
* @type {Boolean}
* @default false
*/
Chart.prototype.isBrushable = false;

/**
* ATTRIBUTE: isSortableRows
*	Boolean flag indicating whether rows can be manually sorted.
*
* @type {Boolean}
* @default false
*/
Chart.prototype.isSortableRows = false;

/**
* ATTRIBUTE: isSortableCols
*	Boolean flag indicating whether columns can be manually sorted.
*
* @type {Boolean}
* @default false
*/
Chart.prototype.isSortableCols = false;


// LIFECYCLE //

Chart.prototype.created = require( './lifecycle/created.js' );

Chart.prototype.attached = require( './lifecycle/attached.js' );

Chart.prototype.detached = require( './lifecycle/detached.js' );


// INIT //

Chart.prototype.init = require( './init' );


// CHART CREATION //

Chart.prototype.create = require( './create' );

Chart.prototype.createBase = require( './create/base.js' );

Chart.prototype.createBackground = require( './create/background.js' );

Chart.prototype.createMarks = require( './create/marks.js' );

Chart.prototype.createRows = require( './create/rows.js' );

Chart.prototype.createCols = require( './create/cols.js' );

Chart.prototype.createCells = require( './create/cells.js' );

Chart.prototype.createAxes = require( './create/axes.js' );

Chart.prototype.createBrush = require( './create/brush.js' );


// RESET ELEMENTS //

Chart.prototype.reset = require( './reset' );

Chart.prototype.resetBase = require( './reset/base.js' );

Chart.prototype.resetAxes = require( './reset/axes.js' );

Chart.prototype.resetRows = require( './reset/rows.js' );

Chart.prototype.resetCols = require( './reset/cols.js' );

Chart.prototype.resetCells = require( './reset/cells.js' );


// CLEAR //

Chart.prototype.clear = require( './clear' );


// UTILITY METHODS //

Chart.prototype.graphWidth = require( './utils/graphWidth.js' );

Chart.prototype.graphHeight = require( './utils/graphHeight.js' );

Chart.prototype.x = require( './utils/x.js' );

Chart.prototype.y = require( './utils/y.js' );

Chart.prototype.z = require( './utils/z.js' );

Chart.prototype.cx = require( './utils/cx.js' );

Chart.prototype.color = require( './utils/color.js' );

Chart.prototype.getRowName = require( './utils/getRowName.js' );

Chart.prototype.getColName = require( './utils/getColName.js' );

Chart.prototype.zDomain = require( './utils/zDomain.js' );

Chart.prototype.colorDomain = require( './utils/colorDomain.js' );

Chart.prototype.delay = require( './utils/delay.js' );

Chart.prototype.fontSize = require( './utils/fontSize.js' );

Chart.prototype.calculatePadding = require( './utils/calculatePadding.js' );

Chart.prototype.maxTextLengths = require( './utils/maxTextLengths.js' );

Chart.prototype.validateOrder = require( './utils/validateOrder.js' );


// WATCHERS //

Chart.prototype.dataChanged = require( './watchers/data.js' );

Chart.prototype.rowOrderChanged = require( './watchers/rowOrder.js' );

Chart.prototype.colOrderChanged = require( './watchers/colOrder.js' );

Chart.prototype.configChanged = require( './watchers/config.js' );

Chart.prototype.widthChanged = require( './watchers/width.js' );

Chart.prototype.heightChanged = require( './watchers/height.js' );

Chart.prototype.paddingLeftChanged = require( './watchers/paddingLeft.js' );

Chart.prototype.paddingRightChanged = require( './watchers/paddingRight.js' );

Chart.prototype.paddingBottomChanged = require( './watchers/paddingBottom.js' );

Chart.prototype.paddingTopChanged = require( './watchers/paddingTop.js' );

Chart.prototype.zValueChanged = require( './watchers/zValue.js' );

Chart.prototype.zMinChanged = require( './watchers/zMin.js' );

Chart.prototype.zMaxChanged = require( './watchers/zMax.js' );

Chart.prototype.cValueChanged = require( './watchers/cValue.js' );

Chart.prototype.colorOrderChanged = require( './watchers/colorOrder.js' );

Chart.prototype.colorsChanged = require( './watchers/colors.js' );

Chart.prototype.xLabelChanged = require( './watchers/xLabel.js' );

Chart.prototype.yLabelChanged = require( './watchers/yLabel.js' );

Chart.prototype.durationChanged = require( './watchers/duration.js' );

Chart.prototype.autoUpdateChanged = require( './watchers/autoUpdate.js' );

Chart.prototype.autoResizeChanged = require( './watchers/autoResize.js' );

Chart.prototype.isBrushableChanged = require( './watchers/isBrushable.js' );

Chart.prototype.isSortableRowsChanged = require( './watchers/isSortableRows.js' );

Chart.prototype.isSortableColsChanged = require( './watchers/isSortableCols.js' );


// LISTENERS //

Chart.prototype.addListeners = require( './listeners/add.js' );

Chart.prototype.removeListeners = require( './listeners/remove.js' );

Chart.prototype.onRowClick = require( './listeners/rowClick.js' );

Chart.prototype.onColClick = require( './listeners/colClick.js' );

Chart.prototype.onCellClick = require( './listeners/cellClick.js' );

Chart.prototype.onRowHover = require( './listeners/rowHover.js' );

Chart.prototype.onRowHoverEnd = require( './listeners/rowHoverEnd.js' );

Chart.prototype.onColHover = require( './listeners/colHover.js' );

Chart.prototype.onColHoverEnd = require( './listeners/colHoverEnd.js' );

Chart.prototype.onCellHover = require( './listeners/cellHover.js' );

Chart.prototype.onCellHoverEnd = require( './listeners/cellHoverEnd.js' );

Chart.prototype.onRowDragStart = require( './listeners/rowDragStart.js' );

Chart.prototype.onRowDrag = require( './listeners/rowDrag.js' );

Chart.prototype.onRowDragEnd = require( './listeners/rowDragEnd.js' );

Chart.prototype.onColDragStart = require( './listeners/colDragStart.js' );

Chart.prototype.onColDrag = require( './listeners/colDrag.js' );

Chart.prototype.onColDragEnd = require( './listeners/colDragEnd.js' );

Chart.prototype.onTransitionEnd = require( './listeners/transitionEnd.js' );

Chart.prototype.onBrushEnd = require( './listeners/brushEnd.js' );

Chart.prototype.onResize = require( './listeners/resize.js' );


// EXPORTS //

module.exports = Chart;

},{"./clear":2,"./create":9,"./create/axes.js":3,"./create/background.js":4,"./create/base.js":5,"./create/brush.js":6,"./create/cells.js":7,"./create/cols.js":8,"./create/marks.js":10,"./create/rows.js":11,"./init":13,"./lifecycle/attached.js":14,"./lifecycle/created.js":15,"./lifecycle/detached.js":16,"./listeners/add.js":17,"./listeners/brushEnd.js":18,"./listeners/cellClick.js":19,"./listeners/cellHover.js":20,"./listeners/cellHoverEnd.js":21,"./listeners/colClick.js":22,"./listeners/colDrag.js":23,"./listeners/colDragEnd.js":24,"./listeners/colDragStart.js":25,"./listeners/colHover.js":26,"./listeners/colHoverEnd.js":27,"./listeners/remove.js":28,"./listeners/resize.js":29,"./listeners/rowClick.js":30,"./listeners/rowDrag.js":31,"./listeners/rowDragEnd.js":32,"./listeners/rowDragStart.js":33,"./listeners/rowHover.js":34,"./listeners/rowHoverEnd.js":35,"./listeners/transitionEnd.js":36,"./reset":42,"./reset/axes.js":38,"./reset/base.js":39,"./reset/cells.js":40,"./reset/cols.js":41,"./reset/rows.js":43,"./utils/calculatePadding.js":44,"./utils/color.js":45,"./utils/colorDomain.js":46,"./utils/cx.js":47,"./utils/delay.js":48,"./utils/fontSize.js":50,"./utils/getColName.js":51,"./utils/getRowName.js":52,"./utils/graphHeight.js":53,"./utils/graphWidth.js":54,"./utils/maxTextLengths.js":55,"./utils/validateOrder.js":56,"./utils/x.js":57,"./utils/y.js":58,"./utils/z.js":59,"./utils/zDomain.js":60,"./watchers/autoResize.js":61,"./watchers/autoUpdate.js":62,"./watchers/cValue.js":63,"./watchers/colOrder.js":64,"./watchers/colorOrder.js":65,"./watchers/colors.js":66,"./watchers/config.js":67,"./watchers/data.js":68,"./watchers/duration.js":69,"./watchers/height.js":70,"./watchers/isBrushable.js":71,"./watchers/isSortableCols.js":72,"./watchers/isSortableRows.js":73,"./watchers/paddingBottom.js":74,"./watchers/paddingLeft.js":75,"./watchers/paddingRight.js":76,"./watchers/paddingTop.js":77,"./watchers/rowOrder.js":78,"./watchers/width.js":79,"./watchers/xLabel.js":80,"./watchers/yLabel.js":81,"./watchers/zMax.js":82,"./watchers/zMin.js":83,"./watchers/zValue.js":84}],2:[function(require,module,exports){
/**
*
*	FUNCTION: clear
*
*
*	DESCRIPTION:
*		- Clears a chart.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: clear()
*	Clears a chart.
*
* @returns {Object} context
*/
function clear() {
	/* jslint validthis:true */
	this.$.rows.remove();
	this.$.cols.remove();
	this._brush.clear();
	return this;
} // end FUNCTION clear()


// EXPORTS //

module.exports = clear;

},{}],3:[function(require,module,exports){
/**
*
*	FUNCTION: createAxes
*
*
*	DESCRIPTION:
*		- Creates chart axis elements.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: createAxes()
*	Creates the chart axis elements.
*
* @returns {Object} context
*/
function createAxes() {
	/* jslint validthis:true */
	var graph = this.$.graph,
		axis;

	// Remove any existing axes...
	if ( this.$.xAxis ) {
		this.$.xAxis.remove();
	}
	if ( this.$.yAxis ) {
		this.$.yAxis.remove();
	}
	axis = graph.append( 'svg:g' )
		.attr( 'property', 'axis' )
		.attr( 'class', 'x axis' );
	this.$.xAxis = axis;

	this.$.xLabel = axis.append( 'svg:text' )
		.attr( 'property', 'axis.label' )
		.attr( 'class', 'label noselect' )
		.attr( 'text-anchor', 'middle' )
		.attr( 'x', this.graphWidth() / 2 )
		.attr( 'y', -(this._maxColTextLength+16) )
		.text( this.xLabel );

	axis = graph.append( 'svg:g' )
		.attr( 'property', 'axis' )
		.attr( 'class', 'y axis' );

	this.$.yLabel = axis.append( 'svg:text' )
		.attr( 'property', 'axis.label' )
		.attr( 'class', 'label noselect' )
		.attr( 'text-anchor', 'middle' )
		.attr( 'transform', 'rotate(-90)' )
		.attr( 'x', -this.graphHeight() / 2 )
		.attr( 'y', -(this._maxRowTextLength+16) )
		.text( this.xLabel );

	return this;
} // end METHOD createAxes()


// EXPORTS //

module.exports = createAxes;

},{}],4:[function(require,module,exports){
/**
*
*	FUNCTION: createBackground
*
*
*	DESCRIPTION:
*		- Creates a chart background element.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: createBackground()
*	Creates a background element.
*
* @returns {Object} context
*/
function createBackground() {
	/* jslint validthis:true */
	// Remove any existing background...
	if ( this.$.bkgd ) {
		this.$.bkgd.remove();
	}
	this.$.bkgd = this.$.graph.append( 'svg:rect' )
		.attr( 'class', 'background' )
		.attr( 'x', 0 )
		.attr( 'y', 0 )
		.attr( 'width', this.graphWidth() )
		.attr( 'height', this.graphHeight() );

	return this;
} // end FUNCTION createBackground()


// EXPORTS //

module.exports = createBackground;

},{}],5:[function(require,module,exports){
/**
*
*	FUNCTION: createBase
*
*
*	DESCRIPTION:
*		- Creates a chart base.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: createBase()
*	Creates the chart base.
*
* @returns {Object} context
*/
function createBase() {
	/* jslint validthis:true */
	var pLeft,
		pTop,
		canvas;

	// Only cache the root element once (should not change)...
	if ( !this.$.root ) {
		this.$.root = this._d3.select( this.$.chart );
	}
	// Remove any existing canvas...
	if ( this.$.canvas ) {
		this.$.canvas.remove();
	}
	// Get the padding values:
	pLeft = ( this.paddingLeft === null ) ? this._paddingLeft : this.paddingLeft;
	pTop = ( this.paddingTop === null ) ? this._paddingTop : this.paddingTop;

	// Create the SVG element:
	canvas = this.$.root.append( 'svg:svg' )
		.attr( 'property', 'canvas' )
		.attr( 'class', 'canvas' )
		.attr( 'width', this.width )
		.attr( 'height', this.height );
	this.$.canvas = canvas;

	// Create a text element for auto-computing padding based on row and column names:
	this.$.text = canvas.append( 'svg:text' )
		.attr( 'class', 'noselect' )
		.attr( 'font-size', this._maxFontSize )
		.attr( 'x', 6 )
		.attr( 'y', 0 )
		.attr( 'dy', '.32em' )
		.attr( 'text-anchor', 'start' )
		.attr( 'opacity', 0 );

	this.$.text = this.$.text.node();

	// Create the graph element:
	this.$.graph = canvas.append( 'svg:g' )
		.attr( 'property', 'graph' )
		.attr( 'class', 'graph' )
		.attr( 'data-graph-type', 'matrix-diagram' )
		.attr( 'transform', 'translate(' + pLeft + ',' + pTop + ')' );

	return this;
} // end FUNCTION createBase()


// EXPORTS //

module.exports = createBase;

},{}],6:[function(require,module,exports){
/**
*
*	FUNCTION: createBrush
*
*
*	DESCRIPTION:
*		- Creates a brush element which overlays graph marks.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: createBrush()
*	Creates a brush element which overlays the graph marks.
*
* @returns {Object} context
*/
function createBrush() {
	/* jslint validthis:true */
	this.$.brush = this.$.graph.append( 'svg:g' )
		.attr( 'property', 'brush' )
		.attr( 'class', 'brush' );

	return this;
} // end FUNCTION createBrush()


// EXPORTS //

module.exports = createBrush;

},{}],7:[function(require,module,exports){
/**
*
*	FUNCTION: createCells
*
*
*	DESCRIPTION:
*		- Creates cell elements.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: createCells( d, i )
*	Create cell elements.
*
* @param {String} d - row name
* @param {Number} i - row index
* @returns {Object} context
*/
function createCells( d, i ) {
	/* jslint validthis:true */
	var row = this._d3.select( this.$.rows[0][i] );

	row.selectAll( '.cell' )
		.data( this.data.data()[i] )
		.enter()
		.append( 'svg:rect' )
			.attr( 'class', 'cell' )
			.attr( 'x', this._cx )
			.attr( 'width', this._xScale.rangeBand() )
			.attr( 'height', this._yScale.rangeBand() )
			.attr( 'fill-opacity', ( typeof this.zValue === 'function' ) ? this._z : this.zValue )
			.attr( 'fill', this._color )
			.on( 'mouseover', this._onCellHover )
			.on( 'mouseout', this._onCellHoverEnd )
			.on( 'click', this._onCellClick );

	return this;
} // end FUNCTION createCells()


// EXPORTS //

module.exports = createCells;

},{}],8:[function(require,module,exports){
/**
*
*	FUNCTION: createCols
*
*
*	DESCRIPTION:
*		- Creates column elements.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: createCols()
*	Creates column elements.
*
* @returns {Object} context
*/
function createCols() {
	/* jslint validthis:true */
	var cols = this.$.marks.selectAll( '.col' )
		.data( (this.data) ? this.data.colnames() :  [] )
		.enter()
		.append( 'svg:g' )
			.attr( 'class', 'col y' )
			.attr( 'transform', this._x )
			.on( 'mouseover', this._onColHover )
			.on( 'mouseout', this._onColHoverEnd );

	cols.append( 'svg:line' )
		.attr( 'class', 'grid y' )
		.attr( 'x1', -this.graphHeight() );

	cols.append( 'svg:text' )
		.attr( 'class', 'noselect name' )
		.attr( 'x', 6 )
		.attr( 'y', this._xScale.rangeBand() / 2 )
		.attr( 'dy', '.32em' )
		.attr( 'text-anchor', 'start' )
		.attr( 'font-size', this.fontSize() )
		.text( this._getColName )
		.on( 'click', this._onColClick );

	// Cache references to created elements:
	this.$.cols = cols;
	this.$.colGridlines = cols.selectAll( '.grid.y' );
	this.$.colnames = cols.selectAll( '.name' );

	return this;
} // end FUNCTION createCols()


// EXPORTS //

module.exports = createCols;

},{}],9:[function(require,module,exports){
/**
*
*	FUNCTION: create
*
*
*	DESCRIPTION:
*		- Creates a chart.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: create()
*	Creates a chart.
*
* @returns {Object} context
*/
function create() {
	/* jslint validthis:true */
	// Ensure that the width and height are set before creating a chart...
	this.width = this.width || this.clientWidth || this.parentNode.clientWidth || 600;
	this.height = this.height || this.clientHeight || this.parentNode.clientHeight || 400;

	// Create the chart layers...
	this
		.createBase()
		.createBackground()
		.createMarks()
		.createAxes()
		.createBrush();

	return this;
} // end FUNCTION create()


// EXPORTS //

module.exports = create;

},{}],10:[function(require,module,exports){
/**
*
*	FUNCTION: createMarks
*
*
*	DESCRIPTION:
*		- Creates graph marks.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: createMarks()
*	Creates the graph marks.
*
* @returns {Object} context
*/
function createMarks() {
	/* jslint validthis:true */
	if ( this.$.marks ) {
		this.$.marks.remove();
	}
	this.$.marks = this.$.graph.append( 'svg:g' )
		.attr( 'property', 'marks' )
		.attr( 'class', 'marks' );

	this.createRows()
		.createCols();

	return this;
} // end FUNCTION createMarks()


// EXPORTS //

module.exports = createMarks;

},{}],11:[function(require,module,exports){
/**
*
*	FUNCTION: createRows
*
*
*	DESCRIPTION:
*		- Creates row elements.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: createRows()
*	Creates row elements.
*
* @returns {Object} context
*/
function createRows() {
	/* jslint validthis:true */
	var rows = this.$.marks.selectAll( '.row' )
		.data( (this.data) ? this.data.rownames() : [] )
		.enter()
		.append( 'svg:g' )
			.attr( 'class', 'row' )
			.attr( 'transform', this._y )
			.on( 'mouseover', this._onRowHover )
			.on( 'mouseout', this._onRowHoverEnd );

	rows.append( 'svg:line' )
		.attr( 'class', 'grid x' )
		.attr( 'x1', this.graphWidth() );

	rows.append( 'svg:text' )
		.attr( 'class', 'noselect name' )
		.attr( 'x', -6 )
		.attr( 'y', this._yScale.rangeBand() / 2 )
		.attr( 'dy', '.32em' )
		.attr( 'text-anchor', 'end' )
		.attr( 'font-size', this.fontSize() )
		.text( this._getRowName )
		.on( 'click', this._onRowClick );

	// Cache references to created elements:
	this.$.rows = rows;
	this.$.rowGridlines = rows.selectAll( '.grid.x' );
	this.$.rownames = rows.selectAll( '.name' );

	// Create the row cells:
	rows.each( this._createCells );

	this.$.cells = rows.selectAll( '.cell' );

	return this;
} // end FUNCTION createRows()


// EXPORTS //

module.exports = createRows;

},{}],12:[function(require,module,exports){
/**
*
*	EVENTS
*
*
*	DESCRIPTION:
*		- List of public broadcast events to which clients may subscribe.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

// EXPORTS //

module.exports = [
	'data',
	'roworder',
	'colorder',
	'colors',
	'colorOrder',

	'width',
	'height',
	'zmin',
	'zmax',

	'change',
	'err',

	'resized',

	'clicked',
	'clicked.row',
	'clicked.col',
	'clicked.cell',

	'hover',
	'hover.row',
	'hover.col',
	'hover.cell',

	'hoverend',
	'hoverend.row',
	'hoverend.col',
	'hoverend.cell',

	'sortend',
	'sortend.row',
	'sortend.col',

	'transitionended',

	'brushend'
];

},{}],13:[function(require,module,exports){
/**
*
*	FUNCTION: init
*
*
*	DESCRIPTION:
*		- Performs element initialization.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

/* global document */
'use strict';

// MODULES //

var delayed = require( './../utils/delayed.js' ),
	events = require( './../events' );


// VARIABLES //

var create = document.createElement.bind( document );


// INIT //

/**
* METHOD: init()
*	Initialization.
*
* @returns {Object} context
*/
function init() {
	/* jslint validthis:true */
	var d3, el, $;

	// Create a new D3 element to access the library dependency:
	el = create( 'polymer-d3' );
	d3 = el.d3;
	this._d3 = d3;

	// Create a new uuid element to access the library dependency for creating uuids:
	el = create( 'polymer-uuid' );
	this._uuid = el.uuid;

	// Assign the chart a private uuid:
	this.__uid__ = this._uuid.v4();

	// Initialize attributes...

	// Config: (hint an object)
	this.config = {};

	// Events:
	this.events = events.slice();

	// Data:
	this.data = null;
	this.rowOrder = [];
	this.colOrder = [];

	// Colors:
	this.colors = [ '#474747' ];
	this.colorOrder = [];

	// Private attributes...

	this._rowOrder = null;
	this._colOrder = null;

	this._colors = null;
	this._colorOrder = null;

	// Row and column name font size:
	this._maxFontSize = 16; // px

	// Max row and column name lengths...
	this._maxRowTextLength = 0;
	this._maxColTextLength = 0;

	// Padding...
	this._minPadding = 40; // px
	this._paddingLeft = this._minPadding;
	this._paddingRight = this._minPadding;
	this._paddingTop = this._minPadding;
	this._paddingBottom = this._minPadding;

	// Private methods...

	// Scales...
	this._xScale = d3.scale.ordinal()
		.rangeBands( [ 0, this.graphWidth() ] )
		.domain( [ 0 ] );
	this._yScale = d3.scale.ordinal()
		.rangeBands( [ 0, this.graphHeight() ] )
		.domain( [ 0 ] );
	this._zScale = d3.scale.linear()
		.domain( [ 0, 1 ] )
		.range( [ 0, 1 ] )
		.clamp( true );
	this._cScale = d3.scale.ordinal()
		.domain( this.colorOrder )
		.range( this.colors );

	// Labels:
	this._getRowName = this.getRowName.bind( this );
	this._getColName = this.getColName.bind( this );

	// Marks...
	this._x = this.x.bind( this );
	this._y = this.y.bind( this );
	this._z = this.z.bind( this );

	this._color = this.color.bind( this );

	this._cx = this.cx.bind( this );

	this._createCells = this.createCells.bind( this );
	this._resetCells = this.resetCells.bind( this );

	// Transitions...
	this._onTransitionEnd = this.onTransitionEnd.bind( this );

	// Interaction...
	this._onRowHover = this.onRowHover.bind( this );
	this._onColHover = this.onColHover.bind( this );
	this._onCellHover = this.onCellHover.bind( this );

	this._onRowHoverEnd = this.onRowHoverEnd.bind( this );
	this._onColHoverEnd = this.onColHoverEnd.bind( this );
	this._onCellHoverEnd = this.onCellHoverEnd.bind( this );

	this._onRowClick = this.onRowClick.bind( this );
	this._onColClick = this.onColClick.bind( this );
	this._onCellClick = this.onCellClick.bind( this );

	this._onResize = delayed( this.onResize.bind( this ), 400 );

	// Brush...
	this._brush = d3.svg.brush()
		.x( this._xScale )
		.y( this._yScale )
		.on( 'brushend', this.onBrushEnd.bind( this ) );

	// Drag...
	this._rowDrag = d3.behavior.drag()
		.on( 'dragstart', this.onRowDragStart.bind( this ) )
		.on( 'drag', this.onRowDrag.bind( this ) )
		.on( 'dragend', this.onRowDragEnd.bind( this ) );

	this._colDrag = d3.behavior.drag()
		.on( 'dragstart', this.onColDragStart.bind( this ) )
		.on( 'drag', this.onColDrag.bind( this ) )
		.on( 'dragend', this.onColDragEnd.bind( this ) );

	this._active = {
		'row': null,
		'col': null,
		'cells': null,
		'x': null,
		'y': null,
		'dragging': false
	};

	// Element cache...
	this.$ = $ = {};

	// Base elements...
	$.root = null;
	$.canvas = null;
	$.graph = null;
	$.bkgd = null;
	$.text = null;

	// Axis elements...
	$.xAxis = null;
	$.yAxis = null;
	$.xLabel = null;
	$.yLabel = null;

	// Data elements...
	$.marks = null;
	$.rows = null;
	$.cols = null;
	$.cells = null;

	// Grid lines...
	$.rowGridlines = null;
	$.colGridlines = null;

	// Names...
	$.rownames = null;
	$.colnames = null;

	// Brush...
	$.brush = null;

	return this;
} // end FUNCTION init()


// EXPORTS //

module.exports = init;

},{"./../events":12,"./../utils/delayed.js":49}],14:[function(require,module,exports){
/**
*
*	FUNCTION: attached
*
*
*	DESCRIPTION:
*		- Event listener for when an element is inserted into the DOM.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: attached()
*	Event listener for when an element is inserted in the DOM.
*/
function attached() {
	/* jslint validthis:true */
	this.create().addListeners();
} // end FUNCTION attached()


// EXPORTS //

module.exports = attached;


},{}],15:[function(require,module,exports){
/**
*
*	FUNCTION: created
*
*
*	DESCRIPTION:
*		- Event handler for when an element is created.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: created()
*	Event handler for when an element is created.
*/
function created() {
	/* jslint validthis:true */
	this.init();
} // end FUNCTION created()


// EXPORTS //

module.exports = created;

},{}],16:[function(require,module,exports){
/**
*
*	FUNCTION: detached
*
*
*	DESCRIPTION:
*		- Event listener for when an element is removed from the DOM.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: detached()
*	Event listener for when an element is removed from the DOM.
*/
function detached() {
	/* jslint validthis:true */
	this.removeListeners();
} // end FUNCTION detached()


// EXPORTS //

module.exports = detached;

},{}],17:[function(require,module,exports){
/**
*
*	FUNCTION: addListeners
*
*
*	DESCRIPTION:
*		- Adds events listeners.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

/* global window */
'use strict';

/**
* FUNCTION: addListeners()
*	Adds event listeners.
*
* @returns {Object} context
*/
function addListeners() {
	/* jslint validthis:true */
	this.removeListeners();
	if ( this.autoResize ) {
		window.addEventListener( 'resize', this._onResize, false );
	}
	return this;
} // end FUNCTION addListeners()


// EXPORTS //

module.exports = addListeners;

},{}],18:[function(require,module,exports){
/**
*
*	FUNCTION: onBrushEnd
*
*
*	DESCRIPTION:
*		- Event listener for when a brush interaction ends.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onBrushEnd()
*	Event listener for when a brush interaction ends. Adjusts the brush extent in order to snap to nearest cell boundaries.
*/
function onBrushEnd() {
	/* jslint validthis:true */
	var brush = this._brush,
		extent = brush.extent(),
		xScale = this._xScale,
		yScale = this._yScale,
		idx = {},
		xDomain,
		yDomain,
		x1, x2,
		y1, y2,
		dx, dy;

	x1 = extent[ 0 ][ 0 ];
	x2 = extent[ 1 ][ 0 ];
	y1 = extent[ 0 ][ 1 ];
	y2 = extent[ 1 ][ 1 ];

	dx = xScale.rangeBand();
	dy = yScale.rangeBand();

	x1 = Math.round( x1 / dx );
	x2 = Math.round( x2 / dx );
	y1 = Math.round( y1 / dy );
	y2 = Math.round( y2 / dy );

	idx.col1 = x1;
	idx.row1 = y1;

	xDomain = xScale.domain();
	yDomain = yScale.domain();

	x1 = xScale( xDomain[ x1 ] );
	y1 = yScale( yDomain[ y1 ] );

	// Check if upper bounds exceeded scale domains...
	if ( x2 === xDomain.length ) {
		idx.col2 = x2 - 1;
		x2 = this.graphWidth();
	} else {
		idx.col2 = x2;
		x2 = xScale( xDomain[ x2 ] );
	}
	if ( y2 === yDomain.length ) {
		idx.row2 = y2 - 1;
		y2 = this.graphHeight();
	} else {
		idx.row2 = y2;
		y2 = yScale( yDomain[ y2 ] );
	}
	extent = [
		[ x1, y1 ],
		[ x2, y2 ]
	];

	this.$.brush.transition()
		.call( brush.extent( extent ) );

	this.fire( 'brushend', idx );
} // end FUNCTION onBrushEnd()


// EXPORTS //

module.exports = onBrushEnd;

},{}],19:[function(require,module,exports){
/**
*
*	FUNCTION: onCellClick
*
*
*	DESCRIPTION:
*		- Event listener for cell clicks.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onCellClick( d, i )
*	Event listener for cell clicks.
*
* @param {String} d - cell data
* @param {Number} i - cell index
* @returns {Boolean} false
*/
function onCellClick( d, i ) {
	/* jslint validthis:true */
	var evt = this._d3.event,
		rows = this.$.rows[ 0 ],
		row,
		j;

	evt.datum = d;
	evt.col = i;

	// Determine the row index...
	row = evt.path[ 1 ];
	for ( j = 0; j < rows.length; j++ ) {
		if ( rows[ j ] === row ) {
			break;
		}
	}
	evt.row = j;

	this.fire( 'clicked.cell', evt );
	this.fire( 'clicked', evt );
	return false;
} // end FUNCTION onCellClick()


// EXPORTS //

module.exports = onCellClick;

},{}],20:[function(require,module,exports){
/**
*
*	FUNCTION: onCellHover
*
*
*	DESCRIPTION:
*		- Event listener for cell mouseover events.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onCellHover( d, i )
*	Mouseover listener for cells.
*
* @param {String} d - cell data
* @param {Number} i - cell index
* @returns {Boolean} false
*/
function onCellHover( d, i ) {
	/* jslint validthis:true */
	var evt = this._d3.event,
		rows = this.$.rows[ 0 ],
		row,
		j;

	this.$.cols[ 0 ][ i ].classList.add( 'active' );

	evt.datum = d;
	evt.col = i;

	// Determine the row index...
	row = evt.path[ 1 ];
	for ( j = 0; j < rows.length; j++ ) {
		if ( rows[ j ] === row ) {
			break;
		}
	}
	evt.row = j;

	this.fire( 'hover.cell', evt );
	this.fire( 'hover', evt );
	return false;
} // end FUNCTION onCellHover()


// EXPORTS //

module.exports = onCellHover;

},{}],21:[function(require,module,exports){
/**
*
*	FUNCTION: onCellHoverEnd
*
*
*	DESCRIPTION:
*		- Event listener for cell mouseout events.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onCellHoverEnd( d, i )
*	Mouseout listener for cells.
*
* @param {String} d - cell data
* @param {Number} i - cell index
* @returns {Boolean} false
*/
function onCellHoverEnd( d, i ) {
	/* jslint validthis:true */
	var evt = this._d3.event,
		rows = this.$.rows[ 0 ],
		row,
		j;

	this.$.cols[ 0 ][ i ].classList.remove( 'active' );

	evt.datum = d;
	evt.col = i;

	// Determine the row index...
	row = evt.path[ 1 ];
	for ( j = 0; j < rows.length; j++ ) {
		if ( rows[ j ] === row ) {
			break;
		}
	}
	evt.row = j;

	this.fire( 'hoverend.cell', evt );
	this.fire( 'hoverend', evt );
	return false;
} // end FUNCTION onCellHoverEnd()


// EXPORTS //

module.exports = onCellHoverEnd;

},{}],22:[function(require,module,exports){
/**
*
*	FUNCTION: onColClick
*
*
*	DESCRIPTION:
*		- Event listener for column clicks.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onColClick( d, i )
*	Event listener for column clicks.
*
* @param {String} d - row name
* @param {Number} i - row index
* @returns {Boolean} false
*/
function onColClick( d, i ) {
	/* jslint validthis:true */
	var evt = this._d3.event;
	evt.datum = d;
	evt.index = i;
	this.fire( 'clicked.col', evt );
	this.fire( 'clicked', evt );
	return false;
} // end FUNCTION onColClick()


// EXPORTS //

module.exports = onColClick;

},{}],23:[function(require,module,exports){
/**
*
*	FUNCTION: onColDrag
*
*
*	DESCRIPTION:
*		- Event listener for when a user drags a column.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onColDrag( d, i )
*	Event listener for when a user drags a column.
*
* @param {*} d - datum
* @param {Number} i - column index
*/
function onColDrag() {
	/* jslint validthis:true */
	var x = this._d3.event.x,
		w;

	this._active.dragging = true;

	// Ensure that the column does not venture outside the graph area...
	if ( x < 0 ) {
		x = 0;
	} else {
		w = this.graphWidth() - this._xScale.rangeBand();
		if ( x > w ) {
			x = w;
		}
	}
	this._active.col.attr( 'transform', 'translate(' + x + ')rotate(-90)' );
	this._active.cells.attr( 'x', x );
	this._active.x = x;
} // end FUNCTION onColDrag()


// EXPORTS //

module.exports = onColDrag;

},{}],24:[function(require,module,exports){
/**
*
*	FUNCTION: onColDragEnd
*
*
*	DESCRIPTION:
*		- Event listener for when a user stops dragging a column.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onColDragEnd( d, i )
*	Event listener for when a user stops dragging a column.
*
* @param {*} d - datum
* @param {Number} i - column index
*/
function onColDragEnd( d, i ) {
	/* jslint validthis:true */
	var self = this,
		evt = this._d3.event,
		duration = this.duration,
		delay = this.delay,
		order,
		j, k,
		idx;

	if ( !this._active.dragging ) {
		return;
	}
	this._active.dragging = false;

	if ( this._colOrder ) {
		order = this._colOrder.slice();
	} else {
		order = this._xScale.domain().slice();
	}
	// Match the element index to its place in the x-domain (use linear search as array elements may be in random order)...
	for ( j = 0; j < order.length; j++ ) {
		if ( i === order[ j ] ) {
			i = j;
			break;
		}
	}
	// Determine the nearest column index:
	j = Math.round( this._active.x / this._xScale.rangeBand() );

	// Re-order the columns...
	idx = order[ i ];
	if ( i === j ) {
		this._active.col.attr( 'transform', this._x( d, idx ) );
		this._active.cells.attr( 'x', this._cx( d, idx ) );
	} else {
		if ( i < j ) {
			// Case 1: shift elements to the left...
			for ( k = i; k < j; k++ ) {
				order[ k ] = order[ k+1 ];
			}
		} else {
			// Case 2: shift elements to the right...
			for ( k = i; k > j; k-- ) {
				order[ k ] = order[ k-1 ];
			}
		}
		order[ j ] = idx;

		// Modify the transition properties when sorting...
		this.duration = 100;
		this.delay = 0;
		this.addEventListener( 'transitionended', onEnd );

		this.colOrder = order;
	}
	this._active.col = null;
	this._active.cells = null;
	this._active.x = null;

	evt.datum = d;
	evt.col = i;

	function onEnd() {
		self.duration = duration;
		self.delay = delay;

		self.removeEventListener( 'transitionended', onEnd );

		self.fire( 'sortend.col', evt );
		self.fire( 'sortend', evt );
	}
} // end FUNCTION onColDragEnd()


// EXPORTS //

module.exports = onColDragEnd;

},{}],25:[function(require,module,exports){
/**
*
*	FUNCTION: onColDragStart
*
*
*	DESCRIPTION:
*		- Event listener for when a user initiates a column drag.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onColDragStart( d, i )
*	Event listener for when a user initiates a column drag.
*
* @param {*} d - datum
* @param {Number} i - column index
*/
function onColDragStart( d, i ) {
	/* jslint validthis:true */
	var len = this.data.rownames().length,
		cells = this.$.cells,
		arr = new Array( len );

	this._active.col = this._d3.select( this.$.cols[ 0 ][ i ] );

	for ( var j = 0; j < len; j++ ) {
		arr[ j ] = cells[ j ][ i ];
	}
	this._active.cells = this._d3.selectAll( arr );
} // end FUNCTION onColDragStart()


// EXPORTS //

module.exports = onColDragStart;

},{}],26:[function(require,module,exports){
/**
*
*	FUNCTION: onColHover
*
*
*	DESCRIPTION:
*		- Event listener for column mouseover events.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onColHover( d, i )
*	Mouseover listener for columns.
*
* @param {String} d - row name
* @param {Number} i - row index
* @returns {Boolean} false
*/
function onColHover( d, i ) {
	/* jslint validthis:true */
	var evt = this._d3.event;

	this.$.cols[ 0 ][ i ].classList.add( 'active' );

	evt.datum = d;
	evt.index = i;
	this.fire( 'hover.col', evt );
	this.fire( 'hover', evt );
	return false;
} // end FUNCTION onColHover()


// EXPORTS //

module.exports = onColHover;

},{}],27:[function(require,module,exports){
/**
*
*	FUNCTION: onColHoverEnd
*
*
*	DESCRIPTION:
*		- Event listener for column mouseout events.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onColHoverEnd( d, i )
*	Mouseout listener for columns.
*
* @param {String} d - row name
* @param {Number} i - row index
* @returns {Boolean} false
*/
function onColHoverEnd( d, i ) {
	/* jslint validthis:true */
	var evt = this._d3.event;

	this.$.cols[ 0 ][ i ].classList.remove( 'active' );

	evt.datum = d;
	evt.index = i;
	this.fire( 'hoverend.col', evt );
	this.fire( 'hoverend', evt );
	return false;
} // end FUNCTION onColHoverEnd()


// EXPORTS //

module.exports = onColHoverEnd;

},{}],28:[function(require,module,exports){
/**
*
*	FUNCTION: removeListeners
*
*
*	DESCRIPTION:
*		- Removes event listeners.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

/* global window */
'use strict';

/**
* FUNCTION: removeListeners()
*	Removes event listeners.
*
* @returns {Object} context
*/
function removeListeners() {
	/* jslint validthis:true */
	window.removeEventListener( 'resize', this._onResize );
	return this;
} // end FUNCTION removeListeners()


// EXPORTS //

module.exports = removeListeners;

},{}],29:[function(require,module,exports){
/**
*
*	FUNCTION: onResize
*
*
*	DESCRIPTION:
*		- Resize event listener.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onResize()
*	Resize event listener.
*/
function onResize() {
	/* jslint validthis:true */
	this.fire( 'resized', {
		'el': 'polymer-matrix-diagram',
		'msg': 'Received a resize event.',
		'width': this.clientWidth,
		'height': this.clientHeight
	});
	if ( !this.$.canvas ) {
		return;
	}
	this.width = this.clientWidth;
} // end FUNCTION onResize()


// EXPORTS //

module.exports = onResize;

},{}],30:[function(require,module,exports){
/**
*
*	FUNCTION: onRowClick
*
*
*	DESCRIPTION:
*		- Event listener for row clicks.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onRowClick( d, i )
*	Event listener for row clicks.
*
* @param {String} d - row name
* @param {Number} i - row index
* @returns {Boolean} false
*/
function onRowClick( d, i ) {
	/* jslint validthis:true */
	var evt = this._d3.event;
	evt.datum = d;
	evt.index = i;
	this.fire( 'clicked.row', evt );
	this.fire( 'clicked', evt );
	return false;
} // end FUNCTION onRowClick()


// EXPORTS //

module.exports = onRowClick;

},{}],31:[function(require,module,exports){
/**
*
*	FUNCTION: onRowDrag
*
*
*	DESCRIPTION:
*		- Event listener for when a user drags a row.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onRowDrag( d, i )
*	Event listener for when a user drags a row.
*
* @param {*} d - datum
* @param {Number} i - row index
*/
function onRowDrag() {
	/* jslint validthis:true */
	var y = this._d3.event.y,
		h;

	this._active.dragging = true;

	// Ensure that the row does not venture outside the graph area...
	if ( y < 0 ) {
		y = 0;
	} else {
		h = this.graphHeight() - this._yScale.rangeBand();
		if ( y > h ) {
			y = h;
		}
	}
	this._active.row.attr( 'transform', 'translate(0,' + y + ')' );
	this._active.y = y;
} // end FUNCTION onRowDrag()


// EXPORTS //

module.exports = onRowDrag;

},{}],32:[function(require,module,exports){
/**
*
*	FUNCTION: onRowDragEnd
*
*
*	DESCRIPTION:
*		- Event listener for when a user stops dragging a row.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onRowDragEnd( d, i )
*	Event listener for when a user stops dragging a row.
*
* @param {*} d - datum
* @param {Number} i - row index
*/
function onRowDragEnd( d, i ) {
	/* jslint validthis:true */
	var self = this,
		evt = this._d3.event,
		duration = this.duration,
		delay = this.delay,
		order,
		j, k,
		idx;

	if ( !this._active.dragging ) {
		return;
	}
	this._active.dragging = false;

	if ( this._rowOrder ) {
		order = this._rowOrder.slice();
	} else {
		order = this._yScale.domain().slice();
	}
	// Match the element index to its place in the y-domain (use linear search as array elements may be in random order)...
	for ( j = 0; j < order.length; j++ ) {
		if ( i === order[ j ] ) {
			i = j;
			break;
		}
	}
	// Determine the nearest row index:
	j = Math.round( this._active.y / this._yScale.rangeBand() );

	// Re-order the rows...
	idx = order[ i ];
	if ( i === j ) {
		this._active.row.attr( 'transform', this._y( d, idx ) );
	} else {
		if ( i < j ) {
			// Case 1: shift elements to the left...
			for ( k = i; k < j; k++ ) {
				order[ k ] = order[ k+1 ];
			}
		} else {
			// Case 2: shift elements to the right...
			for ( k = i; k > j; k-- ) {
				order[ k ] = order[ k-1 ];
			}
		}
		order[ j ] = idx;

		// Modify the transition properties when sorting...
		this.duration = 100;
		this.delay = 0;
		this.addEventListener( 'transitionended', onEnd );

		this.rowOrder = order;
	}
	this._active.row = null;
	this._active.y = null;

	evt.datum = d;
	evt.row = i;

	function onEnd() {
		self.duration = duration;
		self.delay = delay;

		self.removeEventListener( 'transitionended', onEnd );

		self.fire( 'sortend.row', evt );
		self.fire( 'sortend', evt );
	}
} // end FUNCTION onRowDragEnd()


// EXPORTS //

module.exports = onRowDragEnd;

},{}],33:[function(require,module,exports){
/**
*
*	FUNCTION: onRowDragStart
*
*
*	DESCRIPTION:
*		- Event listener for when a user initializes a row drag.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onRowDragStart( d, i )
*	Event listener for when a user initiates a row drag.
*
* @param {*} d - datum
* @param {Number} i - row index
*/
function onRowDragStart( d, i ) {
	/* jslint validthis:true */
	this._active.row = this._d3.select( this.$.rows[ 0 ][ i ] );
} // end FUNCTION onRowDragStart()


// EXPORTS //

module.exports = onRowDragStart;

},{}],34:[function(require,module,exports){
/**
*
*	FUNCTION: onRowHover
*
*
*	DESCRIPTION:
*		- Event listener for row mouseover events.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onRowHover( d, i )
*	Mouseover listener for rows.
*
* @param {String} d - row name
* @param {Number} i - row index
* @returns {Boolean} false
*/
function onRowHover( d, i ) {
	/* jslint validthis:true */
	var evt = this._d3.event;

	this.$.rows[ 0 ][ i ].classList.add( 'active' );

	evt.datum = d;
	evt.index = i;
	this.fire( 'hover.row', evt );
	this.fire( 'hover', evt );
	return false;
} // end FUNCTION onRowHover()


// EXPORTS //

module.exports = onRowHover;

},{}],35:[function(require,module,exports){
/**
*
*	FUNCTION: onRowHoverEnd
*
*
*	DESCRIPTION:
*		- Event listener for row mouseout events.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onRowHoverEnd( d, i )
*	Mouseout listener for rows.
*
* @param {String} d - row name
* @param {Number} i - row index
* @returns {Boolean} false
*/
function onRowHoverEnd( d, i ) {
	/* jslint validthis:true */
	var evt = this._d3.event;

	this.$.rows[ 0 ][ i ].classList.remove( 'active' );

	evt.datum = d;
	evt.index = i;
	this.fire( 'hoverend.row', evt );
	this.fire( 'hoverend', evt );
	return false;
} // end FUNCTION onRowHoverEnd()


// EXPORTS //

module.exports = onRowHoverEnd;

},{}],36:[function(require,module,exports){
/**
*
*	FUNCTION: onTransitionEnd
*
*
*	DESCRIPTION:
*		- Event listener for transition end events.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: onTransitionEnd()
*	Event listener for transition `end` events.
*
* @returns {Boolean} false
*/
function onTransitionEnd() {
	/* jslint validthis:true */
	this.fire( 'transitionended', null );
	return false;
} // end FUNCTION onTransitionEnd()


// EXPORTS //

module.exports = onTransitionEnd;

},{}],37:[function(require,module,exports){
/**
*
*	COMPONENT: polymer-matrix-diagram
*
*
*	DESCRIPTION:
*		- Registers the polymer-matrix-diagram web-component.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

/* global Polymer */
'use strict';

// MODULES //

var Chart = require( './chart.js' );


// POLYMER //

Polymer( 'polymer-matrix-diagram', Chart.prototype );

},{"./chart.js":1}],38:[function(require,module,exports){
/**
*
*	FUNCTION: resetAxes
*
*
*	DESCRIPTION:
*		- Resets chart axis elements.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: resetAxes()
*	Resets axis elements.
*
* @returns {Object} context
*/
function resetAxes() {
	/* jslint validthis:true */
	this.$.xLabel
		.attr( 'x', this.graphWidth() / 2 )
		.attr( 'y', -(this._maxColTextLength+16) );

	this.$.yLabel
		.attr( 'x', -this.graphHeight() / 2 )
		.attr( 'y', -(this._maxRowTextLength+16) );

	return this;
} // end FUNCTION resetAxes()


// EXPORTS //

module.exports = resetAxes;

},{}],39:[function(require,module,exports){
/**
*
*	FUNCTION: resetBase
*
*
*	DESCRIPTION:
*		- Reset base chart elements.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: resetBase()
*	Resets base elements.
*
* @returns {Object} context
*/
function resetBase() {
	/* jslint validthis:true */
	var pLeft, pTop;

	pLeft = ( this.paddingLeft === null ) ? this._paddingLeft : this.paddingLeft;
	pTop = ( this.paddingTop === null ) ? this._paddingTop : this.paddingTop;

	this.$.graph
		.attr( 'transform', 'translate(' + pLeft + ',' + pTop + ')' );

	this.$.bkgd
		.attr( 'width', this.graphWidth() )
		.attr( 'height', this.graphHeight() );
	return this;
} // end FUNCTION resetBase()


// EXPORTS //

module.exports = resetBase;

},{}],40:[function(require,module,exports){
/**
*
*	FUNCTION: resetCells
*
*
*	DESCRIPTION:
*		- Resets chart cell elements.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: resetCells( d, i )
*	Resets cell elements.
*
* @param {String} d - row name
* @param {Number} i - row index
* @returns {Object} context
*/
function resetCells( d, i ) {
	/* jslint validthis:true */
	var row, cells;

	row = this._d3.select( this.$.rows[0][i] );

	cells = row.selectAll( '.cell' )
		.data( this.data.data()[i] )
		.attr( 'x', this._cx )
		.attr( 'fill-opacity', ( typeof this.zValue === 'function' ) ? this._z : this.zValue )
		.attr( 'fill', this._color );

	// Remove any old cells:
	cells.exit().remove();

	// Add any new cells:
	cells.enter().append( 'svg:rect' )
		.attr( 'class', 'cell' )
		.attr( 'x', this._cx )
		.attr( 'width', this._xScale.rangeBand() )
		.attr( 'height', this._yScale.rangeBand() )
		.attr( 'fill-opacity', ( typeof this.zValue === 'function' ) ? this._z : this.zValue )
		.attr( 'fill', this._color )
		.on( 'mouseover', this._onCellHover )
		.on( 'mouseout', this._onCellHoverEnd )
		.on( 'click', this._onCellClick );

	return this;
} // end FUNCTION resetCells()


// EXPORTS //

module.exports = resetCells;

},{}],41:[function(require,module,exports){
/**
*
*	FUNCTION: resetCols
*
*
*	DESCRIPTION:
*		- Resets chart column elements.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: resetCols()
*	Resets column elements.
*
* @returns {Object} context
*/
function resetCols() {
	/* jslint validthis:true */
	var cols, gEnter;

	cols = this.$.marks.selectAll( '.col' )
		.data( this.data.colnames() )
		.attr( 'transform', this._x );

	// Remove any old columns:
	cols.exit().remove();

	// Add any new columns:
	gEnter = cols.enter().append( 'svg:g' )
		.attr( 'class', 'col' )
		.attr( 'transform', this._x )
		.on( 'mouseover', this._onColHover )
		.on( 'mouseout', this._onColHoverEnd );

	gEnter.append( 'svg:line' )
		.attr( 'class', 'grid y' )
		.attr( 'x1', -this.graphHeight() );

	gEnter.append( 'svg:text' )
		.attr( 'class', 'noselect name' )
		.attr( 'x', 6 )
		.attr( 'y', this._xScale.rangeBand() / 2 )
		.attr( 'dy', '.32em' )
		.attr( 'text-anchor', 'start' )
		.attr( 'font-size', this.fontSize() )
		.text( this._getColName )
		.on( 'click', this._onColClick );

	// Cache a reference to the columns:
	this.$.cols = cols;
	this.$.colGridlines = cols.selectAll( '.grid.y' );
	this.$.colnames = cols.selectAll( '.name' );

	return this;
} // end FUNCTION resetCols()


// EXPORTS //

module.exports = resetCols;

},{}],42:[function(require,module,exports){
/**
*
*	FUNCTION: reset
*
*
*	DESCRIPTION:
*		- Resets chart elements.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: reset()
*	Resets chart elements.
*
* @returns {Object} context
*/
function reset() {
	/* jslint validthis:true */
	this.resetBase()
		.resetAxes()
		.resetRows()
		.resetCols();
	return this;
} // end FUNCTION reset()


// EXPORTS //

module.exports = reset;

},{}],43:[function(require,module,exports){
/**
*
*	FUNCTION: resetRows
*
*
*	DESCRIPTION:
*		- Resets chart row elements.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: resetRows()
*	Resets row elements.
*
* @returns {Object} this
*/
function resetRows() {
	/* jslint validthis:true */
	var rows, gEnter;

	rows = this.$.marks.selectAll( '.row' )
		.data( this.data.rownames() )
		.attr( 'transform', this._y );

	// Remove any old rows:
	rows.exit().remove();

	// Add any new rows:
	gEnter = rows.enter().append( 'svg:g' )
		.attr( 'class', 'row' )
		.attr( 'transform', this._y )
		.on( 'mouseover', this._onRowHover )
		.on( 'mouseout', this._onRowHoverEnd );

	gEnter.append( 'svg:line' )
		.attr( 'class', 'grid x' )
		.attr( 'x1', this.graphWidth() );

	gEnter.append( 'svg:text' )
		.attr( 'class', 'noselect name' )
		.attr( 'x', -6 )
		.attr( 'y', this._yScale.rangeBand() / 2 )
		.attr( 'dy', '.32em' )
		.attr( 'text-anchor', 'end' )
		.attr( 'font-size', this.fontSize() )
		.text( this._getRowName )
		.on( 'click', this._onRowClick );

	// Update the cache references to row elements:
	this.$.rows = rows;
	this.$.rowGridlines = rows.selectAll( '.grid.x' );
	this.$.rownames = rows.selectAll( '.name' );

	// Create the row cells:
	rows.each( this._resetCells );

	this.$.cells = rows.selectAll( '.cell' );

	return this;
} // end FUNCTION resetRows()


// EXPORTS //

module.exports = resetRows;

},{}],44:[function(require,module,exports){
/**
*
*	FUNCTION: calculatePadding
*
*
*	DESCRIPTION:
*		- Computes padding values based on row and column name computed text length.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: calculatePadding()
*	Computes padding values based on row and column name computed text length.
*
* @returns {Object} context
*/
function calculatePadding() {
	/* jslint validthis:true */
	var text = this.$.text,
		min = this._minPadding,
		scalar = 16,
		names,
		max,
		len,
		h,
		i;

	if ( !this.data ) {
		return this;
	}
	// NOTE: the `scalar` is something of a magic number to avoid pushing up against the canvas edge and crowding axis labels.

	// Rows...
	names = this.data.rownames();

	max = min;
	for ( i = 0; i < names.length; i++ ) {
		text.textContent = names[ i ];
		len = text.getComputedTextLength();
		if ( len > max ) {
			max = len;
		}
	}
	h = this.$.yLabel.node().getBBox().height;
	if ( h ) {
		h += 10;
	}
	this._paddingLeft = Math.ceil( max+scalar+h );

	// Columns...
	names = this.data.colnames();

	max = min;
	for ( i = 0; i < names.length; i++ ) {
		text.textContent = names[ i ];
		len = text.getComputedTextLength();
		if ( len > max ) {
			max = len;
		}
	}
	h = this.$.xLabel.node().getBBox().height;
	if ( h ) {
		h += 10;
	}
	this._paddingTop = Math.ceil( max+scalar+h );

	// Reset the text content:
	text.textContent = '';

	return this;
} // end FUNCTION calculatePadding()


// EXPORTS //

module.exports = calculatePadding;

},{}],45:[function(require,module,exports){
/**
*
*	FUNCTION: color
*
*
*	DESCRIPTION:
*		- Maps a datum to a fill color.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: color( d, i )
*	Maps a datum to a fill color.
*
* @param {Array} d - datum
* @param {Number} i - index
* @returns {String} fill color
*/
function color( d, i ) {
	/* jslint validthis:true */
	return this._cScale( this.cValue( d, i ) );
} // end METHOD color()


// EXPORTS //

module.exports = color;

},{}],46:[function(require,module,exports){
/**
*
*	FUNCTION: cDomain
*
*
*	DESCRIPTION:
*		- Computes a color scale domain.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: asc( a, b )
*	Comparator for sorting an array in ascending order. (Note: non-stable sort order! e.g., when a === b )
*
* @private
* @param {Number|String} a - value
* @param {Number|String} b - value
* @returns {Number} sort value
*/
function asc( a, b ) {
	if ( a < b ) {
		return -1;
	}
	if ( a > b ) {
		return 1;
	}
	if ( a === b ) {
		return 0;
	}
	return NaN;
} // end FUNCTION asc()

/**
* FUNCTION: colorDomain()
*	Computes a color scale domain.
*
* @returns {Array} domain (sorted)
*/
function colorDomain() {
	/* jslint validthis:true */
	var size = this.data.size(),
		data = this.data.data(),
		cValue = this.cValue,
		cache = {},
		d, i, j;

	for ( i = 0; i < size[0]; i++ ) {
		for ( j = 0; j < size[1]; j++ ) {
			d = cValue( data[ i ][ j ], j );
			if ( !cache[ d ] ) {
				cache[ d ] = true;
			}
		}
	}
	return Object.keys( cache ).sort( asc );
} // end FUNCTION colorDomain()


// EXPORTS //

module.exports = colorDomain;

},{}],47:[function(require,module,exports){
/**
*
*	FUNCTION: cx
*
*
*	DESCRIPTION:
*		- Maps a row cell to a pixel value.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: cx( d, i )
*	Maps a row cell to a pixel value.
*
* @param {Array} d - datum
* @param {Number} i - index
* @returns {String} transform string
*/
function cx( d, i ) {
	/* jslint validthis:true */
	return this._xScale( i );
} // end FUNCTION cx()


// EXPORTS //

module.exports = cx;

},{}],48:[function(require,module,exports){
/**
*
*	FUNCTION: delay
*
*
*	DESCRIPTION:
*		- Computes a transition delay based on an element index.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: delay( d, i )
*	Computes a transition delay based on an element index.
*
* @param {*} d - datum
* @param {Number} i - index
* @returns {Number} transition delay in milliseconds
*/
function delay( d, i ) {
	// NOTE: the scalar offset (e.g., 20) is something of a magic number, based more on feel than science.
	return i * 20;
} // end FUNCTION delay()


// EXPORTS //

module.exports = delay;

},{}],49:[function(require,module,exports){
/**
*
*	UTILS: delayed
*
*
*	DESCRIPTION:
*		- Throttles an event listener by delaying its invocation until after all events have finished firing.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: delayed( fcn, delay )
*	Returns a function that fires after the end of an event. A `delay` parameter specifies the interval between when the event was last triggered and when the end listener should be fired (i.e., a form of throttling).
*
* @param {Function} fcn - function to fire at the end of an event
* @param {Number} delay - millisecond delay to impose for function invocation
* @returns {Function} delayed function
*/
function delayed( fcn, delay ) {
	var timeout;
	if ( typeof fcn !== 'function' ) {
		throw new TypeError( 'delayed()::invalid input argument. First argument must be a function.' );
	}
	if ( typeof delay !== 'number' || delay !== delay || delay < 0 ) {
		throw new TypeError( 'delayed()::invalid input argument. Second argument must be a number greater than 0.' );
	}
	return function delayed() {
		var args;
		if ( timeout ) {
			clearTimeout( timeout );
			timeout = setTimeout( later, delay );
		}
		args = arguments;

		// Set a timeout for when the function can be invoked:
		timeout = setTimeout( later, delay );

		function later() {
			timeout = null;
			fcn.apply( null, args );
		}
	};
} // end FUNCTION delayed()


// EXPORTS //

module.exports = delayed;

},{}],50:[function(require,module,exports){
/**
*
*	FUNCTION: fontSize
*
*
*	DESCRIPTION:
*		- Computes row and column name font size based on cell dimensions.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: fontSize()
*	Computes the row and column name font size based on cell dimensions.
*
* @returns {Number} font size in pixels
*/
function fontSize() {
	/* jslint validthis:true */
	var dx, dy;
	dx = this._xScale.rangeBand();
	dy = this._yScale.rangeBand();
	if ( dx > dy ) {
		dx = dy;
	}
	if ( dx > 18 ) {
		// Return the font-size upper bound:
		return this._maxFontSize;
	}
	return dx - 2;
} // end FUNCTION fontSize()


// EXPORTS //

module.exports = fontSize;

},{}],51:[function(require,module,exports){
/**
*
*	FUNCTION: getColName
*
*
*	DESCRIPTION:
*		- Column name accessor.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: getColName( d, i )
*	Returns a column name.
*
* @param {Array} d - datum
* @param {Number} i - index
* @returns {String} column name
*/
function getColName( d ) {
	return d;
} // end FUNCTION getColName()


// EXPORTS //

module.exports = getColName;

},{}],52:[function(require,module,exports){
/**
*
*	FUNCTION: getRowName
*
*
*	DESCRIPTION:
*		- Row name accessor.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: getRowName( d, i )
*	Returns a row name.
*
* @param {Array} d - datum
* @param {Number} i - index
* @returns {String} row name
*/
function getRowName( d ) {
	return d;
} // end FUNCTION getRowName()


// EXPORTS //

module.exports = getRowName;

},{}],53:[function(require,module,exports){
/**
*
*	FUNCTION: graphHeight
*
*
*	DESCRIPTION:
*		- Computes the expected graph height.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: graphHeight()
*	Computes the expected graph height.
*
* @returns {Number} graph height
*/
function graphHeight() {
	/* jshint validthis:true */
	var pTop, pBottom;

	pTop = ( this.paddingTop === null ) ? this._paddingTop : this.paddingTop;
	pBottom = ( this.paddingBottom === null ) ? this._paddingBottom : this.paddingBottom;

	return this.height - pTop - pBottom;
} // end FUNCTION graphHeight()


// EXPORTS //

module.exports = graphHeight;

},{}],54:[function(require,module,exports){
/**
*
*	FUNCTION: graphWidth
*
*
*	DESCRIPTION:
*		- Computes the expected graph width.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: graphWidth()
*	Computes the expected graph width.
*
* @returns {Number} graph width
*/
function graphWidth() {
	/* jslint validthis:true */
	var pLeft, pRight;

	pLeft = ( this.paddingLeft === null ) ? this._paddingLeft : this.paddingLeft;
	pRight = ( this.paddingRight === null ) ? this._paddingRight : this.paddingRight;

	return this.width - pLeft - pRight;
} // end FUNCTION graphWidth()


// EXPORTS //

module.exports = graphWidth;

},{}],55:[function(require,module,exports){
/**
*
*	FUNCTION: maxTextLengths
*
*
*	DESCRIPTION:
*		- Calculates the maximum row and column name lengths.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: maxTextLengths()
*	Calculates the maximum row and column name lengths.
*
* @returns {Object} context
*/
function maxTextLengths() {
	/* jslint validthis:true */
	var text = this.$.text,
		selection,
		names,
		max,
		len,
		i;

	if ( !this.data ) {
		return this;
	}
	selection = this._d3.select( text );

	// Base calculations on the actual name font-size:
	selection.attr( 'font-size', this.fontSize() );

	// Rows...
	names = this.data.rownames();

	max = 0;
	for ( i = 0; i < names.length; i++ ) {
		text.textContent = names[ i ];
		len = text.getComputedTextLength();
		if ( len > max ) {
			max = len;
		}
	}
	this._maxRowTextLength = Math.ceil( max );

	// Columns...
	names = this.data.colnames();

	max = 0;
	for ( i = 0; i < names.length; i++ ) {
		text.textContent = names[ i ];
		len = text.getComputedTextLength();
		if ( len > max ) {
			max = len;
		}
	}
	this._maxColTextLength = Math.ceil( max );

	// Restore the text font-size:
	selection.attr( 'font-size', this._maxFontSize );

	// Reset the text content:
	text.textContent = '';

	return this;
} // end FUNCTION maxTextLengths()


// EXPORTS //

module.exports = maxTextLengths;

},{}],56:[function(require,module,exports){
/**
*
*	FUNCTION: validateOrder
*
*
*	DESCRIPTION:
*		- Validates that an array of indices is a permutation.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: validateOrder( arr )
*	Validates that an array of indices is a permutation.
*
* @param {Array} arr - array of indices
* @returns {Boolean} boolean indicating if valid
*/
function validateOrder( arr ) {
	/* jslint validthis:true */
	var len = arr.length,
		hash = {},
		range,
		key,
		i;

	// Build a hash of all indices, ensuring uniqueness...
	for ( i = 0; i < len; i++ ) {
		key = arr[ i ];
		if ( hash[ key ] ) {
			return false;
		}
		hash[ key ] = true;
	}
	// Create a unique ordered array of all possible indices:
	range = this._d3.range( len );

	// Confirm that the hash has every possible index...
	for ( i = 0; i < len; i++ ) {
		if ( !hash[ range[i] ] ) {
			return false;
		}
	}
	return true;
} // end FUNCTION validateOrder()


// EXPORTS //

module.exports = validateOrder;

},{}],57:[function(require,module,exports){
/**
*
*	FUNCTION: x
*
*
*	DESCRIPTION:
*		- Maps a column to a pixel value.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: x( d, i )
*	Maps a column to a pixel value.
*
* @param {Array} d - datum
* @param {Number} i - index
* @returns {String} transform string
*/
function x( d, i ) {
	/* jslint validthis:true */
	return 'translate(' + this._xScale( i ) + ')rotate(-90)';
} // end METHOD x()


// EXPORTS //

module.exports = x;

},{}],58:[function(require,module,exports){
/**
*
*	FUNCTION: y
*
*
*	DESCRIPTION:
*		- Maps a row to a pixel value.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: y( d, i )
*	Maps a row to a pixel value.
*
* @param {Array} d - datum
* @param {Number} i - index
* @returns {String} transform string
*/
function y( d, i ) {
	/* jslint validthis:true */
	return 'translate(0,' + this._yScale( i ) + ')';
} // end FUNCTION y()


// EXPORTS //

module.exports = y;

},{}],59:[function(require,module,exports){
/**
*
*	FUNCTION: z
*
*
*	DESCRIPTION:
*		- Maps a datum to a fill-opacity value.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: z( d, i )
*	Maps a datum to a fill-opacity value.
*
* @param {Array} d - datum
* @param {Number} i - index
* @returns {Number} fill opacity
*/
function z( d, i ) {
	/* jslint validthis:true */
	return this._zScale( this.zValue( d, i ) );
} // end METHOD z()


// EXPORTS //

module.exports = z;

},{}],60:[function(require,module,exports){
/**
*
*	FUNCTION: zDomain
*
*
*	DESCRIPTION:
*		- Computes the z-domain.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: zDomain( min, max )
*	Computes the z-domain.
*
* @param {Null|Number} min - minimum value
* @param {Null|Number} max - maximum value
* @returns {Array} domain
*/
function zDomain( min, max ) {
	/* jslint validthis:true */
	var d3 = this._d3,
		data = this.data.data(),
		zValue = this.zValue,
		err;

	if ( typeof zValue !== 'function' ) {
		return [ this.zMin, this.zMax ];
	}
	if ( min !== null && ( typeof min !== 'number' || min !== min ) ) {
		err = new TypeError( 'zDomain()::invalid input argument. Minimum value must be numeric or `null`. Value: `' + min + '`.' );
		this.fire( 'err', err );
		return;
	}
	if ( max !== null && ( typeof max !== 'number' || max !== max ) ) {
		err = new TypeError( 'zDomain()::invalid input argument. Maximum value must be numeric or `null`. Value: `' + max + '`.' );
		this.fire( 'err', err );
		return;
	}
	if ( min === null ) {
		min = d3.min( data, function onRow( row ) {
			return d3.min( row, zValue );
		});
	}
	if ( max === null ) {
		max = d3.max( data, function onRow( row ) {
			return d3.max( row, zValue );
		});
	}
	return [ min, max ];
} // end FUNCTION zDomain()


// EXPORTS //

module.exports = zDomain;

},{}],61:[function(require,module,exports){
/**
*
*	FUNCTION: autoResizeChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to an `auotResize` setting.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

/* global window */
'use strict';

/**
* FUNCTION: autoResizeChanged( oldVal, newVal )
*	Event handler for changes to an `autoResize` setting.
*
* @param {Boolean} oldVal - old value
* @param {Boolean} newVal - new value
*/
function autoResizeChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var err;
	if ( typeof newVal !== 'boolean' ) {
		err = new TypeError( 'autoResize::invalid assignment. Must be a boolean. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.autoResize = oldVal;
		return;
	}
	if ( newVal ) {
		window.addEventListener( 'resize', this._onResize, false );
	} else {
		window.removeEventListener( 'resize', this._onResize );
	}
	this.fire( 'change', {
		'attr': 'autoResize',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION autoResizeChanged()


// EXPORTS //

module.exports = autoResizeChanged;

},{}],62:[function(require,module,exports){
/**
*
*	FUNCTION: autoUpdateChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to an `autoUpdate` setting.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: autoUpdateChanged( oldVal, newVal )
*	Event handler for changes to an `autoUpdate` setting.
*
* @param {Boolean} oldVal - old value
* @param {Boolean} newVal - new value
*/
function autoUpdateChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var err;
	if ( typeof newVal !== 'boolean' ) {
		err = new TypeError( 'autoUpdate::invalid assignment. Must be a boolean. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.autoUpdate = oldVal;
		return;
	}
	this.fire( 'change', {
		'attr': 'autoUpdate',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION autoUpdateChanged()


// EXPORTS //

module.exports = autoUpdateChanged;

},{}],63:[function(require,module,exports){
/**
*
*	FUNCTION: cValueChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to a color value accessor.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: cValueChanged( oldVal, newVal )
*	Event handler for changes to a color value accessor.
*
* @param {Function} oldVal - old value
* @param {Function} newVal - new value
*/
function cValueChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var type = typeof newVal,
		err;
	if ( type !== 'function' ) {
		err = new TypeError( 'cValue::invalid assignment. Must be a function. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.cValue = oldVal;
		return;
	}
	if ( this.autoUpdate ) {
		this.$.cells.attr( 'fill', this._color );
	}
	this.fire( 'change', {
		'attr': 'cValue',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION cValueChanged()


// EXPORTS //

module.exports = cValueChanged;

},{}],64:[function(require,module,exports){
/**
*
*	FUNCTION: colOrderChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to chart column order.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: colOrderChanged( val[, newVal] )
*	Event handler for changes to chart column order.
*
* @param {Array} val - change event value
* @param {Array} [newVal] - new array of indices defining the column order
*/
function colOrderChanged( val, newVal ) {
	/* jslint validthis:true */
	var len = this.data.colnames().length,
		colOrder = this.colOrder,
		selection,
		err;

	// Determine if we have a new row order array...
	if ( arguments.length > 1 && !Array.isArray( newVal ) ) {
		err = new TypeError( 'colOrder::invalid assignment. Column order must be an array. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.colOrder = val;
		return;
	}
	if ( colOrder.length !== len ) {
		err = new Error( 'colOrder::invalid assignment. Array length must equal the number of columns. Number of columns: ' + len + '.' );
		this.fire( 'err', err );
		this.colOrder = this._colOrder.slice();
		return;
	}
	if ( !this.validateOrder( colOrder ) ) {
		err = new Error( 'colOrder::invalid assignment. Assigned array must be a permutation of column indices.' );
		this.fire( 'err', err );
		this.colOrder = this._colOrder.slice();
		return;
	}
	this._colOrder = colOrder.slice();
	this._xScale.domain( colOrder );

	if ( this.duration > 0 ) {
		selection = this.$.marks.transition()
			.duration( this.duration )
			.each( 'end', this._onTransitionEnd );

		selection.selectAll( '.col' )
			.delay( this.delay )
			.attr( 'transform', this._x );

		selection.selectAll( '.row' )
			.selectAll( '.cell' )
			.delay( this.delay )
			.attr( 'x', this._cx );
	} else {
		this.$.cols.attr( 'transform', this._x );

		this.$.cells.attr( 'x', this._cx );

		this.fire( 'transitionended', null );
	}
	this.fire( 'colorder', {
		'type': 'change'
	});
	if ( newVal === void 0 ) {
		this.fire( 'change', {
			'attr': 'colOrder',
			'data': val[ 0 ]
		});
	} else {
		this.fire( 'change', {
			'attr': 'colOrder',
			'prev': val,
			'curr': newVal
		});
	}
} // end FUNCTION colOrderChanged()


// EXPORTS //

module.exports = colOrderChanged;

},{}],65:[function(require,module,exports){
/**
*
*	FUNCTION: colorOrderChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to the color scale domain.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: colorOrderChanged( val[, newVal] )
*	Event handler for changes to the color scale domain.
*
* @param {Null|Array} val - change event value
* @param {Null|Array} [newVal] - new color scale domain
*/
function colorOrderChanged( val, newVal ) {
	/* jslint validthis:true */
	var err;
	if ( arguments.length > 1 ) {
		if ( !Array.isArray( newVal ) && newVal !== null ) {
			err = new TypeError( 'colorOrder::invalid assignment. Order must be an array or null. Value: `' + newVal + '`.' );
			this.fire( 'err', err );
			this.colorOrder = val;
			return;
		}
	}
	if ( this.colorOrder === null ) {
		this._colorOrder = this.colorDomain();
	} else {
		this._colorOrder = this.colorOrder.slice();
	}
	this._cScale.domain( this._colorOrder );

	if ( this.autoUpdate ) {
		this.$.cells.attr( 'fill', this._color );
	}
	this.fire( 'colorOrder', {
		'type': 'changed'
	});
	if ( newVal === void 0 ) {
		this.fire( 'change', {
			'attr': 'colorOrder',
			'data': val[ 0 ]
		});
	} else {
		this.fire( 'change', {
			'attr': 'colorOrder',
			'prev': val,
			'curr': newVal
		});
	}
} // end FUNCTION colorOrderChanged()


// EXPORTS //

module.exports = colorOrderChanged;

},{}],66:[function(require,module,exports){
/**
*
*	FUNCTION: colorsChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to the color scale range.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

// VARIABLES //

// See [D3 documentation]{@link https://github.com/mbostock/d3/wiki/Ordinal-Scales#category10}.
var OPTS = [
	'category10',
	'category20',
	'category20b',
	'category20c'
];


// WATCHER //

/**
* FUNCTION: colorsChanged( val[, newVal] )
*	Event handler for changes to the color scale range.
*
* @param {String|Array} val - change event value
* @param {String|Array} [newVal] - new color scale domain
*/
function colorsChanged( val, newVal ) {
	/* jslint validthis:true */
	var err;
	if ( arguments.length > 1 ) {
		if ( typeof newVal === 'string' ) {
			if ( OPTS.indexOf( newVal ) === -1 ) {
				err = new TypeError( 'colors::invalid assignment. Unrecognized color set. Value: `' + newVal + '`.' );
				this.fire( 'err', err );
				this.colors = val;
				return;
			}
		}
		else if ( !Array.isArray( newVal ) ) {
			err = new TypeError( 'colors::invalid assignment. Colors must be an `array` of strings or a recognized color set. Value: `' + newVal + '`.' );
			this.fire( 'err', err );
			this.colors = val;
			return;
		}
	}
	if ( typeof this.colors === 'string' ) {
		this._colors = this._d3.scale[ this.colors ]().range();
	} else {
		this._colors = this.colors.slice();
	}
	this._cScale.range( this._colors );

	if ( this.autoUpdate ) {
		this.$.cells.attr( 'fill', this._color );
	}
	this.fire( 'colors', {
		'type': 'changed'
	});
	if ( newVal === void 0 ) {
		this.fire( 'change', {
			'attr': 'colors',
			'data': val[ 0 ]
		});
	} else {
		this.fire( 'change', {
			'attr': 'colors',
			'prev': val,
			'curr': newVal
		});
	}
} // end FUNCTION colorsChanged()


// EXPORTS //

module.exports = colorsChanged;

},{}],67:[function(require,module,exports){
/**
*
*	FUNCTION: configChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to a chart configuration object.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

// MODULES //

var validate = require( 'matrix-diagram-spec' );


// WATCHER //

/**
* FUNCTION: configChanged( oldConfig, newConfig )
*	Event handler for changes to a chart configuration object.
*
* @param {Object} oldConfig - old config
* @param {Object} newConfig - new config
*/
function configChanged( oldConfig, newConfig ) {
	/* jslint validthis:true */
	var bool,
		err;

	if ( typeof newConfig !== 'object' || newConfig === null || Array.isArray( newConfig) ) {
		err = new TypeError( 'config::invalid assignment. Must be an `object`. Value: `' + newConfig + '`.' );
		this.fire( 'err', err );
		this.config = oldConfig;
		return;
	}
	// TODO: schema validator
	// [1] Merge the new config object with schema template
	// [2] Validate the merged config object
	// [3] Check if errors; if not, proceed.

	// Turn off auto-update:
	bool = this.autoUpdate;
	this.autoUpdate = false;

	// this.width = newConfig.canvas.width;
	// this.height = newConfig.canvas.height;

	// FIXME: The config should be standardized. Put in repo. Version it. Create an associated validator. NPM.

	this.fire( 'change', {
		'attr': 'config',
		'prev': oldConfig,
		'curr': newConfig
	});

	// Reset the auto update flag to its original value:
	this.autoUpdate = bool;

	// Only if auto update is enabled, redraw the chart...
	if ( bool ) {
		this.create();
	}
} // end FUNCTION configChanged()


// EXPORTS //

module.exports = configChanged;

},{"matrix-diagram-spec":92}],68:[function(require,module,exports){
/**
*
*	FUNCTION: dataChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to chart data.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: dataChanged( oldVal newVal )
*	Event handler for changes to chart data.
*
* @param {Array} oldVal - old value
* @param {Array} newVal - new value
*/
function dataChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var range = this._d3.range,
		len;

	// TODO: check if data frame.

	// [0] Set the domains:
	len = this.data.colnames().length;
	this._xScale.domain( range( len ) );

	len = this.data.rownames().length;
	this._yScale.domain( range( len ) );

	this._zScale.domain( this.zDomain( this.zMin, this.zMax ) );

	// [1] Compute padding values based on the row and column names:
	this.calculatePadding();

	// [2] Update the scales:
	this._xScale.rangeBands( [ 0, this.graphWidth() ] );
	this._yScale.rangeBands( [ 0, this.graphHeight() ] );

	// [3] Compute max text lengths based on the row and column names:
	this.maxTextLengths();

	if ( this.autoUpdate ) {
		// [4] Reset elements:
		this.reset();
	}
	this.fire( 'data', {
		'type': 'change'
	});
	// TODO: consider whether you want to actually publish the old and new data values (e.g., this could be sizable when logging)
	this.fire( 'change', {
		'attr': 'data',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION dataChanged()


// EXPORTS //

module.exports = dataChanged;

},{}],69:[function(require,module,exports){
/**
*
*	FUNCTION: durationChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to a transition duration setting.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: durationChanged( oldVal, newVal )
*	Event handler for changes to a transition duration setting.
*
* @param {Null|Number} oldVal - old value
* @param {Null|Number} newVal - new value
*/
function durationChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var err;
	if ( typeof newVal !== 'number' || newVal !== newVal ) {
		err = new TypeError( 'duration::invalid assignment. Must be a numeric. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.duration = oldVal;
		return;
	}
	this.fire( 'change', {
		'attr': 'duration',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION durationChanged()


// EXPORTS //

module.exports = durationChanged;

},{}],70:[function(require,module,exports){
/**
*
*	FUNCTION: heightChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to chart height.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: heightChanged( oldVal, newVal )
*	Event handler for changes to chart height.
*
* @param {Number} oldVal - old value
* @param {Number} newVal - new value
*/
function heightChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var height,
		fontSize,
		dy,
		err;
	if ( typeof newVal !== 'number' || newVal !== newVal || newVal <= 0 ) {
		err = new TypeError( 'height::invalid assignment. Must be a number greater than 0. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.height = oldVal;
		return;
	}
	height = this.graphHeight();

	// [0] Update the y-scale:
	this._yScale.rangeBands( [ 0, height ] );

	// [1] Recompute the row and column name text lengths:
	this.maxTextLengths();

	if ( this.$.canvas && this.autoUpdate ) {
		dy = this._yScale.rangeBand();
		fontSize = this.fontSize();

		// [2] Update the SVG canvas:
		this.$.canvas
			.attr( 'height', newVal );

		// [3] Update the background:
		this.$.bkgd
			.attr( 'height', height );

		// [4] Update the rows:
		this.$.rows
			.attr( 'transform', this._y );

		// [5] Update the columns:
		this.$.colGridlines
			.attr( 'x1', -height );

		// [6] Update the cells:
		this.$.cells
			.attr( 'height', dy );

		// [7] Update the row and column names:
		this.$.rownames
			.attr( 'y', dy / 2 )
			.attr( 'font-size', fontSize );

		this.$.colnames
			.attr( 'y', this._xScale.rangeBand() / 2 )
			.attr( 'font-size', fontSize );

		// [8] Update the x- and y-labels:
		this.$.xLabel
			.attr( 'y', -(this._maxColTextLength+16) );

		this.$.yLabel
			.attr( 'x', -height / 2 )
			.attr( 'y', -(this._maxRowTextLength+16) );
	}
	this.fire( 'height', {
		'type': 'change'
	});
	this.fire( 'change', {
		'attr': 'height',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION heightChanged()


// EXPORTS //

module.exports = heightChanged;

},{}],71:[function(require,module,exports){
/**
*
*	FUNCTION: isBrushableChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to a `isBrushable` setting.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: isBrushableChanged( oldVal, newVal )
*	Event handler for changes to a `isBrushable` setting.
*
* @param {Boolean} oldVal - old value
* @param {Boolean} newVal - new value
*/
function isBrushableChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var err;
	if ( typeof newVal !== 'boolean' ) {
		err = new TypeError( 'isBrushable::invalid assignment. Must be a boolean. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.isBrushable = oldVal;
		return;
	}
	if ( newVal ) {
		this.$.brush.call( this._brush );
	} else {
		this.$.brush.remove();
	}
	this.fire( 'change', {
		'attr': 'isBrushable',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION isBrushableChanged()


// EXPORTS //

module.exports = isBrushableChanged;

},{}],72:[function(require,module,exports){
/**
*
*	FUNCTION: isSortableCols
*
*
*	DESCRIPTION:
*		- Event handler for changes to a setting for sorting columns.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: isSortableColsChanged( oldVal, newVal )
*	Event handler for changes to a setting for sorting columns.
*
* @param {Boolean} oldVal - old value
* @param {Boolean} newVal - new value
*/
function isSortableColsChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var err;
	if ( typeof newVal !== 'boolean' ) {
		err = new TypeError( 'isSortableCols::invalid assignment. Must be a boolean. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.isSortableCols = oldVal;
		return;
	}
	if ( newVal ) {
		this.$.cols.call( this._colDrag );
	} else {
		// Remove all listeners in the `drag` namespace:
		this.$.cols.on( '.drag', null );
	}
	this.fire( 'change', {
		'attr': 'isSortableCols',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION isSortableColsChanged()


// EXPORTS //

module.exports = isSortableColsChanged;

},{}],73:[function(require,module,exports){
/**
*
*	FUNCTION: isSortableRowsChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to a setting for row sorting.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: isSortableRowsChanged( oldVal, newVal )
*	Event handler for changes to a setting for sorting rows.
*
* @param {Boolean} oldVal - old value
* @param {Boolean} newVal - new value
*/
function isSortableRowsChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var err;
	if ( typeof newVal !== 'boolean' ) {
		err = new TypeError( 'isSortableRows::invalid assignment. Must be a boolean. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.isSortableRows = oldVal;
		return;
	}
	if ( newVal ) {
		this.$.rows.call( this._rowDrag );
	} else {
		// Remove all listeners in the `drag` namespace:
		this.$.rows.on( '.drag', null );
	}
	this.fire( 'change', {
		'attr': 'isSortableRows',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION isSortableRowsChanged()


// EXPORTS //

module.exports = isSortableRowsChanged;

},{}],74:[function(require,module,exports){
/**
*
*	FUNCTION: paddingBottom
*
*
*	DESCRIPTION:
*		- Event handler for changes to a chart's bottom padding.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: paddingBottomChanged( oldVal, newVal )
*	Event handler for changes to a chart's bottom padding.
*
* @param {Null|Number} oldVal - old value
* @param {Null|Number} newVal - new value
*/
function paddingBottomChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var height,
		fontSize,
		dy,
		err;
	if ( newVal !== null && (typeof newVal !== 'number' || newVal !== newVal || newVal%1 !== 0 || newVal < 0) ) {
		err = new TypeError( 'paddingBottom::invalid assignment. Must be null or an integer greater than or equal to 0. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.paddingBottom = oldVal;
		return;
	}
	height = this.graphHeight();

	// [0] Update the y-scale:
	this._yScale.rangeBands( [ 0, height ] );

	// [1] Recompute the row and column name text lengths:
	this.maxTextLengths();

	if ( this.autoUpdate ) {
		dy = this._yScale.rangeBand();
		fontSize = this.fontSize();

		// [2] Update the background:
		this.$.bkgd
			.attr( 'height', height );

		// [3] Update the rows:
		this.$.rows
			.attr( 'transform', this._y );

		// [4] Update the columns:
		this.$.colGridlines
			.attr( 'x1', -height );

		// [5] Update the cells:
		this.$.cells
			.attr( 'height', dy );

		// [6] Update the row and column names:
		this.$.rownames
			.attr( 'y', dy / 2 )
			.attr( 'font-size', fontSize );

		this.$.colnames
			.attr( 'y', this._xScale.rangeBand() / 2 )
			.attr( 'font-size', fontSize );

		// [7] Update the x- and y-labels:
		this.$.xLabel
			.attr( 'y', -(this._maxColTextLength+16) );

		this.$.yLabel
			.attr( 'x', -height / 2 )
			.attr( 'y', -(this._maxRowTextLength+16) );
	}
	this.fire( 'change', {
		'attr': 'paddingBottom',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION paddingBottomChanged()


// EXPORTS //

module.exports = paddingBottomChanged;

},{}],75:[function(require,module,exports){
/**
*
*	FUNCTION: paddingLeft
*
*
*	DESCRIPTION:
*		- Event handler for changes to a chart's left padding.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: paddingLeftChanged( oldVal, newVal )
*	Event handler for changes to a chart's left padding.
*
* @param {Null|Number} oldVal - old value
* @param {Null|Number} newVal - new value
*/
function paddingLeftChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var width,
		pLeft,
		pRight,
		pTop,
		fontSize,
		dx,
		err;
	if ( newVal !== null && (typeof newVal !== 'number' || newVal !== newVal || newVal%1 !== 0 || newVal < 0) ) {
		err = new TypeError( 'paddingLeft::invalid assignment. Must be null or an integer greater than or equal to 0. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.paddingLeft = oldVal;
		return;
	}
	pLeft = ( newVal === null ) ? this._paddingLeft : newVal;
	pRight = ( this.paddingRight === null ) ? this._paddingRight : this.paddingRight;
	pTop = ( this.paddingTop === null ) ? this._paddingTop : this.paddingTop;

	width = this.width - pLeft - pRight;

	// [0] Update the x-scale:
	this._xScale.rangeBands( [ 0, width ] );

	// [1] Recompute the row and column name text lengths:
	this.maxTextLengths();

	if ( this.autoUpdate ) {
		dx = this._xScale.rangeBand();
		fontSize = this.fontSize();

		// [2] Update the background:
		this.$.bkgd
			.attr( 'width', width );

		// [3] Update the graph:
		this.$.graph
			.attr( 'transform', 'translate(' + pLeft + ',' + pTop + ')' );

		// [4] Update the rows:
		this.$.rowGridlines
			.attr( 'x1', width );

		// [5] Update the columns:
		this.$.cols
			.attr( 'transform', this._x );

		// [6] Update the cells:
		this.$.cells
			.attr( 'x', this._cx )
			.attr( 'width', dx );

		// [7] Update the row and column names:
		this.$.rownames
			.attr( 'y', this._yScale.rangeBand() / 2 )
			.attr( 'font-size', fontSize );

		this.$.colnames
			.attr( 'y', dx / 2 )
			.attr( 'font-size', fontSize );

		// [8] Update the x- and y-labels:
		this.$.xLabel
			.attr( 'x', width / 2 )
			.attr( 'y', -(this._maxColTextLength+16) );

		this.$.yLabel
			.attr( 'y', -(this._maxRowTextLength+16) );
	}
	this.fire( 'change', {
		'attr': 'paddingLeft',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION paddingLeftChanged()


// EXPORTS //

module.exports = paddingLeftChanged;

},{}],76:[function(require,module,exports){
/**
*
*	FUNCTION: paddingRight
*
*
*	DESCRIPTION:
*		- Event handler for changes to a chart's right padding.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: paddingRightChanged( oldVal, newVal )
*	Event handler for changes to a chart's right padding.
*
* @param {Null|Number} oldVal - old value
* @param {Null|Number} newVal - new value
*/
function paddingRightChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var width,
		fontSize,
		dx,
		err;
	if ( newVal !== null && (typeof newVal !== 'number' || newVal !== newVal || newVal%1 !== 0 || newVal < 0) ) {
		err = new TypeError( 'paddingRight::invalid assignment. Must be null or an integer greater than or equal to 0. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.paddingRight = oldVal;
		return;
	}
	width = this.graphWidth();

	// [0] Update the x-scale:
	this._xScale.rangeBands( [ 0, width ] );

	// [1] Recompute the row and column name text lengths:
	this.maxTextLengths();

	if ( this.autoUpdate ) {
		dx = this._xScale.rangeBand();
		fontSize = this.fontSize();

		// [2] Update the background:
		this.$.bkgd
			.attr( 'width', width );

		// [3] Update the rows:
		this.$.rowGridlines
			.attr( 'x1', width );

		// [4] Update the columns:
		this.$.cols
			.attr( 'transform', this._x );

		// [5] Update the cells:
		this.$.cells
			.attr( 'x', this._cx )
			.attr( 'width', dx );

		// [6] Update the row and column names:
		this.$.rownames
			.attr( 'y', this._yScale.rangeBand() / 2 )
			.attr( 'font-size', fontSize );

		this.$.colnames
			.attr( 'y', dx / 2 )
			.attr( 'font-size', fontSize );

		// [7] Update the x- and y-labels:
		this.$.xLabel
			.attr( 'x', width / 2 )
			.attr( 'y', -(this._maxColTextLength+16) );

		this.$.yLabel
			.attr( 'y', -(this._maxRowTextLength+16) );
	}
	this.fire( 'change', {
		'attr': 'paddingRight',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION paddingRightChanged()


// EXPORTS //

module.exports = paddingRightChanged;

},{}],77:[function(require,module,exports){
/**
*
*	FUNCTION: paddingTopChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to a chart's top padding.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: paddingTopChanged( oldVal, newVal )
*	Event handler for changes to a chart's top padding.
*
* @param {Null|Number} oldVal - old value
* @param {Null|Number} newVal - new value
*/
function paddingTopChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var height,
		pLeft,
		pTop,
		pBottom,
		fontSize,
		dy,
		err;
	if ( newVal !== null && (typeof newVal !== 'number' || newVal !== newVal || newVal%1 !== 0 || newVal < 0) ) {
		err = new TypeError( 'paddingTop::invalid assignment. Must be null or an integer greater than or equal to 0.  Value: `' + newVal + '.' );
		this.fire( 'err', err );
		this.paddingTop = oldVal;
		return;
	}
	pTop = ( newVal === null ) ? this._paddingTop : newVal;
	pBottom = ( this.paddingBottom === null ) ? this._paddingBottom : this.paddingBottom;
	pLeft = ( this.paddingLeft === null ) ? this._paddingLeft : this.paddingLeft;

	height = this.height - pTop - pBottom;

	// [0] Update the y-scale:
	this._yScale.rangeBands( [ 0, height ] );

	// [1] Recompute the row and column name text lengths:
	this.maxTextLengths();

	if ( this.autoUpdate ) {
		dy = this._yScale.rangeBand();
		fontSize = this.fontSize();

		// [2] Update the background:
		this.$.bkgd
			.attr( 'height', height );

		// [3] Update the graph:
		this.$.graph
			.attr( 'transform', 'translate(' + pLeft + ',' + pTop + ')' );

		// [4] Update the rows:
		this.$.rows
			.attr( 'transform', this._y );

		// [5] Update the columns:
		this.$.colGridlines
			.attr( 'x1', -height );

		// [6] Update the cells:
		this.$.cells
			.attr( 'height', dy );

		// [7] Update the row and column labels:
		this.$.rownames
			.attr( 'y', dy / 2 )
			.attr( 'font-size', fontSize );

		this.$.colnames
			.attr( 'y', this._xScale.rangeBand() / 2 )
			.attr( 'font-size', fontSize );

		// [8] Update the x- and y-labels:
		this.$.xLabel
			.attr( 'y', -(this._maxColTextLength+16) );

		this.$.yLabel
			.attr( 'x', -height / 2 )
			.attr( 'y', -(this._maxRowTextLength+16) );
	}
	this.fire( 'change', {
		'attr': 'paddingTop',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION paddingTopChanged()


// EXPORTS //

module.exports = paddingTopChanged;

},{}],78:[function(require,module,exports){
/**
*
*	FUNCTION: rowOrderChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to chart row order.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: rowOrderChanged( val[, newVal] )
*	Event handler for changes to chart row order.
*
* @param {Array} val - change event value
* @param {Array} [newVal] - new array of indices defining the row order
*/
function rowOrderChanged( val, newVal ) {
	/* jslint validthis:true */
	var len = this.data.rownames().length,
		rowOrder = this.rowOrder,
		selection,
		err;

	// Determine if we have a new row order array...
	if ( arguments.length > 1 && !Array.isArray( newVal ) ) {
		err = new TypeError( 'rowOrder::invalid assignment. Row order must be an array. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.rowOrder = val;
		return;
	}
	if ( rowOrder.length !== len ) {
		err = new Error( 'rowOrder::invalid assignment. Array length must equal the number of rows. Number of rows: ' + len + '.' );
		this.fire( 'err', err );
		this.rowOrder = this._rowOrder.slice();
		return;
	}
	if ( !this.validateOrder( rowOrder ) ) {
		err = new Error( 'rowOrder::invalid assignment. Assigned array must be a permutation of row indices.' );
		this.fire( 'err', err );
		this.rowOrder = this._rowOrder.slice();
		return;
	}
	this._rowOrder = rowOrder.slice();
	this._yScale.domain( rowOrder );

	if ( this.duration > 0 ) {
		selection = this.$.marks.transition()
			.duration( this.duration )
			.each( 'end', this._onTransitionEnd );

		selection.selectAll( '.row' )
			.delay( this.delay )
			.attr( 'transform', this._y );
	} else {
		this.$.rows.attr( 'transform', this._y );
		this.fire( 'transitionended', null );
	}
	this.fire( 'roworder', {
		'type': 'change'
	});
	if ( newVal === void 0 ) {
		this.fire( 'change', {
			'attr': 'rowOrder',
			'data': val[ 0 ]
		});
	} else {
		this.fire( 'change', {
			'attr': 'rowOrder',
			'prev': val,
			'curr': newVal
		});
	}
} // end FUNCTION rowOrderChanged()


// EXPORTS //

module.exports = rowOrderChanged;

},{}],79:[function(require,module,exports){
/**
*
*	FUNCTION: widthChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to chart width.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: widthChanged( oldVal, newVal )
*	Event handler for changes to chart width.
*
* @param {Number} oldVal - old value
* @param {Number} newVal - new value
*/
function widthChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var width,
		fontSize,
		dx,
		err;
	if ( typeof newVal !== 'number' || newVal !== newVal || newVal <= 0 ) {
		err = new TypeError( 'width::invalid assignment. Must be a number greater than 0. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.width = oldVal;
		return;
	}
	width = this.graphWidth();

	// [0] Update the x-scale:
	this._xScale.rangeBands( [ 0, width ] );

	// [1] Recompute the row and column name text lengths:
	this.maxTextLengths();

	if ( this.$.canvas && this.autoUpdate ) {
		dx = this._xScale.rangeBand();
		fontSize = this.fontSize();

		// [2] Update the SVG canvas:
		this.$.canvas
			.attr( 'width', newVal );

		// [3] Update the background:
		this.$.bkgd
			.attr( 'width', width );

		// [4] Update the rows:
		this.$.rowGridlines
			.attr( 'x1', width );

		// [5] Update the columns:
		this.$.cols
			.attr( 'transform', this._x );

		// [6] Update the cells:
		this.$.cells
			.attr( 'x', this._cx )
			.attr( 'width', dx );

		// [7] Update the row and column names:
		this.$.rownames
			.attr( 'y', this._yScale.rangeBand() / 2 )
			.attr( 'font-size', fontSize );

		this.$.colnames
			.attr( 'y', dx / 2 )
			.attr( 'font-size', fontSize );

		// [8] Update the x- and y-labels:
		this.$.xLabel
			.attr( 'x', width / 2 )
			.attr( 'y', -(this._maxColTextLength+16) );

		this.$.yLabel
			.attr( 'y', -(this._maxRowTextLength+16) );
	}
	this.fire( 'width', {
		'type': 'change'
	});
	this.fire( 'change', {
		'attr': 'width',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION widthChanged()


// EXPORTS //

module.exports = widthChanged;

},{}],80:[function(require,module,exports){
/**
*
*	FUNCTION: xLabelChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to a chart's x-label.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: xLabelChanged( oldVal, newVal )
*	Event handler for changes to a chart's x-label.
*
* @param {String} oldVal - old value
* @param {String} newVal - new value
*/
function xLabelChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var height,
		fontSize,
		dy,
		err;
	if ( typeof newVal !== 'string' ) {
		err = new TypeError( 'xLabel::invalid assignment. Must be a string. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.xLabel = oldVal;
		return;
	}
	if ( this.autoUpdate ) {
		// [0] Set the label text:
		this.$.xLabel.text( newVal );

		// Only recompute the layout if label changed to or from an empty string...
		if ( !oldVal || !newVal ) {
			// [1] Compute the padding based on the row and column text lengths:
			this.calculatePadding();
			height = this.graphHeight();

			// [2] Update the y-scale:
			this._yScale.rangeBands( [ 0, height ] );

			dy = this._yScale.rangeBand();
			fontSize = this.fontSize();

			// [3] Compute the max row and column text lengths:
			this.maxTextLengths();

			// [4] Update the background:
			this.$.bkgd
				.attr( 'height', height );

			// [5] Update the graph:
			this.$.graph
				.attr( 'transform', 'translate(' + this._paddingLeft + ',' + this._paddingTop + ')' );

			// [6] Update the rows:
			this.$.rows
				.attr( 'transform', this._y );

			// [7] Update the columns:
			this.$.colGridlines
				.attr( 'x1', -height );

			// [8] Update the cells:
			this.$.cells
				.attr( 'height', dy );

			// [9] Update the row and column labels:
			this.$.rownames
				.attr( 'y', dy / 2 )
				.attr( 'font-size', fontSize );

			this.$.colnames
				.attr( 'y', this._xScale.rangeBand() / 2 )
				.attr( 'font-size', fontSize );

			// [10] Update the x- and y-labels:
			this.$.xLabel
				.attr( 'y', -(this._maxColTextLength+16) );

			this.$.yLabel
				.attr( 'x', -height / 2 )
				.attr( 'y', -(this._maxRowTextLength+16) );
		}
	}
	this.fire( 'change', {
		'attr': 'xLabel',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION xLabelChanged()


// EXPORTS //

module.exports = xLabelChanged;

},{}],81:[function(require,module,exports){
/**
*
*	FUNCTION: yLabelChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to a chart's y-label.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: yLabelChanged( oldVal, newVal )
*	Event handler for changes to a chart's y-label.
*
* @param {String} oldVal - old value
* @param {String} newVal - new value
*/
function yLabelChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var width,
		fontSize,
		dx,
		err;
	if ( typeof newVal !== 'string' ) {
		err = new TypeError( 'yLabel::invalid assignment. Must be a string. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.yLabel = oldVal;
		return;
	}
	if ( this.autoUpdate ) {
		// [0] Set the label text:
		this.$.yLabel.text( newVal );

		// Only recompute the layout if label changed to or from an empty string...
		if ( !oldVal || !newVal ) {
			// [1] Compute the padding based on the row and column text lengths:
			this.calculatePadding();
			width = this.graphWidth();

			// [2] Update the x-scale:
			this._xScale.rangeBands( [ 0, width ] );

			dx = this._xScale.rangeBand();
			fontSize = this.fontSize();

			// [3] Compute the max row and column text lengths:
			this.maxTextLengths();

			// [4] Update the background:
			this.$.bkgd
				.attr( 'width', width );

			// [5] Update the graph:
			this.$.graph
				.attr( 'transform', 'translate(' + this._paddingLeft + ',' + this._paddingTop + ')' );

			// [6] Update the rows:
			this.$.rowGridlines
				.attr( 'x1', width );

			// [7] Update the columns:
			this.$.cols
				.attr( 'transform', this._x );

			// [8] Update the cells:
			this.$.cells
				.attr( 'x', this._cx )
				.attr( 'width', dx );

			// [9] Update the row and column names:
			this.$.rownames
				.attr( 'y', this._yScale.rangeBand() / 2 )
				.attr( 'font-size', fontSize );

			this.$.colnames
				.attr( 'y', dx / 2 )
				.attr( 'font-size', fontSize );

			// [10] Update the x- and y-labels:
			this.$.xLabel
				.attr( 'x', width / 2 )
				.attr( 'y', -(this._maxColTextLength+16) );

			this.$.yLabel
				.attr( 'y', -(this._maxRowTextLength+16) );
		}
	}
	this.fire( 'change', {
		'attr': 'yLabel',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION yLabelChanged()


// EXPORTS //

module.exports = yLabelChanged;

},{}],82:[function(require,module,exports){
/**
*
*	FUNCTION: zMaxChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to a maximum z-value.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: zMaxChanged( oldVal, newVal )
*	Event handler for changes to a maximum z-value.
*
* @param {Null|Number} oldVal - old value
* @param {Null|Number} newVal - new value
*/
function zMaxChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var zScale = this._zScale,
		domain = zScale.domain(),
		err;

	if ( newVal !== null && (typeof newVal !== 'number' || newVal !== newVal) ) {
		err = new TypeError( 'zMax::invalid assignment. Must be a numeric or `null`. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.zMax = oldVal;
		return;
	}
	domain = this.zDomain( domain[ 0 ], newVal );

	zScale.domain( domain );

	if ( this.autoUpdate ) {
		this.$.cells.attr( 'fill-opacity', ( typeof this.zValue === 'function' ) ? this._z : this.zValue );
	}
	this.fire( 'zmax', {
		'type': 'change'
	});
	this.fire( 'change', {
		'attr': 'zMax',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION zMaxChanged()


// EXPORTS //

module.exports = zMaxChanged;

},{}],83:[function(require,module,exports){
/**
*
*	FUNCTION: zMinChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to a minimum z-value.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: zMinChanged( oldVal, newVal )
*	Event handler for changes to a minimum z-value.
*
* @param {Null|Number} oldVal - old value
* @param {Null|Number} newVal - new value
*/
function zMinChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var zScale = this._zScale,
		domain = zScale.domain(),
		err;

	if ( newVal !== null && (typeof newVal !== 'number' || newVal !== newVal) ) {
		err = new TypeError( 'zMin::invalid assignment. Must be a numeric or `null`. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.zMin = oldVal;
		return;
	}
	domain = this.zDomain( newVal, domain[ 1 ] );

	zScale.domain( domain );

	if ( this.autoUpdate ) {
		this.$.cells.attr( 'fill-opacity', ( typeof this.zValue === 'function' ) ? this._z : this.zValue );
	}
	this.fire( 'zmin', {
		'type': 'change'
	});
	this.fire( 'change', {
		'attr': 'zMin',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION zMinChanged()


// EXPORTS //

module.exports = zMinChanged;

},{}],84:[function(require,module,exports){
/**
*
*	FUNCTION: zValueChanged
*
*
*	DESCRIPTION:
*		- Event handler for changes to a z-value accessor.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

/**
* FUNCTION: zValueChanged( oldVal, newVal )
*	Event handler for changes to a z-value accessor.
*
* @param {Function|Number} oldVal - old value
* @param {Function|Number} newVal - new value
*/
function zValueChanged( oldVal, newVal ) {
	/* jslint validthis:true */
	var type = typeof newVal,
		err;
	if ( type !== 'function' && ( type !== 'number' || newVal !== newVal || newVal < 0 || newVal > 1 ) ) {
		err = new TypeError( 'zValue::invalid assignment. Must be either a function or a numeric value between 0 and 1. Value: `' + newVal + '`.' );
		this.fire( 'err', err );
		this.zValue = oldVal;
		return;
	}
	if ( type === 'function' ) {
		this._zScale.domain( this.zDomain( this.zMin, this.zMax ) );
	}
	if ( this.autoUpdate ) {
		this.$.cells.attr( 'fill-opacity', ( typeof this.zValue === 'function' ) ? this._z : this.zValue );
	}
	this.fire( 'change', {
		'attr': 'zValue',
		'prev': oldVal,
		'curr': newVal
	});
} // end FUNCTION zValueChanged()


// EXPORTS //

module.exports = zValueChanged;

},{}],85:[function(require,module,exports){
// http://wiki.commonjs.org/wiki/Unit_Testing/1.0
//
// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!
//
// Originally from narwhal.js (http://narwhaljs.org)
// Copyright (c) 2009 Thomas Robinson <280north.com>
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the 'Software'), to
// deal in the Software without restriction, including without limitation the
// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
// sell copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

// when used in node, this will actually load the util module we depend on
// versus loading the builtin util module as happens otherwise
// this is a bug in node module loading as far as I am concerned
var util = require('util/');

var pSlice = Array.prototype.slice;
var hasOwn = Object.prototype.hasOwnProperty;

// 1. The assert module provides functions that throw
// AssertionError's when particular conditions are not met. The
// assert module must conform to the following interface.

var assert = module.exports = ok;

// 2. The AssertionError is defined in assert.
// new assert.AssertionError({ message: message,
//                             actual: actual,
//                             expected: expected })

assert.AssertionError = function AssertionError(options) {
  this.name = 'AssertionError';
  this.actual = options.actual;
  this.expected = options.expected;
  this.operator = options.operator;
  if (options.message) {
    this.message = options.message;
    this.generatedMessage = false;
  } else {
    this.message = getMessage(this);
    this.generatedMessage = true;
  }
  var stackStartFunction = options.stackStartFunction || fail;

  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, stackStartFunction);
  }
  else {
    // non v8 browsers so we can have a stacktrace
    var err = new Error();
    if (err.stack) {
      var out = err.stack;

      // try to strip useless frames
      var fn_name = stackStartFunction.name;
      var idx = out.indexOf('\n' + fn_name);
      if (idx >= 0) {
        // once we have located the function frame
        // we need to strip out everything before it (and its line)
        var next_line = out.indexOf('\n', idx + 1);
        out = out.substring(next_line + 1);
      }

      this.stack = out;
    }
  }
};

// assert.AssertionError instanceof Error
util.inherits(assert.AssertionError, Error);

function replacer(key, value) {
  if (util.isUndefined(value)) {
    return '' + value;
  }
  if (util.isNumber(value) && (isNaN(value) || !isFinite(value))) {
    return value.toString();
  }
  if (util.isFunction(value) || util.isRegExp(value)) {
    return value.toString();
  }
  return value;
}

function truncate(s, n) {
  if (util.isString(s)) {
    return s.length < n ? s : s.slice(0, n);
  } else {
    return s;
  }
}

function getMessage(self) {
  return truncate(JSON.stringify(self.actual, replacer), 128) + ' ' +
         self.operator + ' ' +
         truncate(JSON.stringify(self.expected, replacer), 128);
}

// At present only the three keys mentioned above are used and
// understood by the spec. Implementations or sub modules can pass
// other keys to the AssertionError's constructor - they will be
// ignored.

// 3. All of the following functions must throw an AssertionError
// when a corresponding condition is not met, with a message that
// may be undefined if not provided.  All assertion methods provide
// both the actual and expected values to the assertion error for
// display purposes.

function fail(actual, expected, message, operator, stackStartFunction) {
  throw new assert.AssertionError({
    message: message,
    actual: actual,
    expected: expected,
    operator: operator,
    stackStartFunction: stackStartFunction
  });
}

// EXTENSION! allows for well behaved errors defined elsewhere.
assert.fail = fail;

// 4. Pure assertion tests whether a value is truthy, as determined
// by !!guard.
// assert.ok(guard, message_opt);
// This statement is equivalent to assert.equal(true, !!guard,
// message_opt);. To test strictly for the value true, use
// assert.strictEqual(true, guard, message_opt);.

function ok(value, message) {
  if (!value) fail(value, true, message, '==', assert.ok);
}
assert.ok = ok;

// 5. The equality assertion tests shallow, coercive equality with
// ==.
// assert.equal(actual, expected, message_opt);

assert.equal = function equal(actual, expected, message) {
  if (actual != expected) fail(actual, expected, message, '==', assert.equal);
};

// 6. The non-equality assertion tests for whether two objects are not equal
// with != assert.notEqual(actual, expected, message_opt);

assert.notEqual = function notEqual(actual, expected, message) {
  if (actual == expected) {
    fail(actual, expected, message, '!=', assert.notEqual);
  }
};

// 7. The equivalence assertion tests a deep equality relation.
// assert.deepEqual(actual, expected, message_opt);

assert.deepEqual = function deepEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected)) {
    fail(actual, expected, message, 'deepEqual', assert.deepEqual);
  }
};

function _deepEqual(actual, expected) {
  // 7.1. All identical values are equivalent, as determined by ===.
  if (actual === expected) {
    return true;

  } else if (util.isBuffer(actual) && util.isBuffer(expected)) {
    if (actual.length != expected.length) return false;

    for (var i = 0; i < actual.length; i++) {
      if (actual[i] !== expected[i]) return false;
    }

    return true;

  // 7.2. If the expected value is a Date object, the actual value is
  // equivalent if it is also a Date object that refers to the same time.
  } else if (util.isDate(actual) && util.isDate(expected)) {
    return actual.getTime() === expected.getTime();

  // 7.3 If the expected value is a RegExp object, the actual value is
  // equivalent if it is also a RegExp object with the same source and
  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).
  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {
    return actual.source === expected.source &&
           actual.global === expected.global &&
           actual.multiline === expected.multiline &&
           actual.lastIndex === expected.lastIndex &&
           actual.ignoreCase === expected.ignoreCase;

  // 7.4. Other pairs that do not both pass typeof value == 'object',
  // equivalence is determined by ==.
  } else if (!util.isObject(actual) && !util.isObject(expected)) {
    return actual == expected;

  // 7.5 For all other Object pairs, including Array objects, equivalence is
  // determined by having the same number of owned properties (as verified
  // with Object.prototype.hasOwnProperty.call), the same set of keys
  // (although not necessarily the same order), equivalent values for every
  // corresponding key, and an identical 'prototype' property. Note: this
  // accounts for both named and indexed properties on Arrays.
  } else {
    return objEquiv(actual, expected);
  }
}

function isArguments(object) {
  return Object.prototype.toString.call(object) == '[object Arguments]';
}

function objEquiv(a, b) {
  if (util.isNullOrUndefined(a) || util.isNullOrUndefined(b))
    return false;
  // an identical 'prototype' property.
  if (a.prototype !== b.prototype) return false;
  //~~~I've managed to break Object.keys through screwy arguments passing.
  //   Converting to array solves the problem.
  if (isArguments(a)) {
    if (!isArguments(b)) {
      return false;
    }
    a = pSlice.call(a);
    b = pSlice.call(b);
    return _deepEqual(a, b);
  }
  try {
    var ka = objectKeys(a),
        kb = objectKeys(b),
        key, i;
  } catch (e) {//happens when one is a string literal and the other isn't
    return false;
  }
  // having the same number of owned properties (keys incorporates
  // hasOwnProperty)
  if (ka.length != kb.length)
    return false;
  //the same set of keys (although not necessarily the same order),
  ka.sort();
  kb.sort();
  //~~~cheap key test
  for (i = ka.length - 1; i >= 0; i--) {
    if (ka[i] != kb[i])
      return false;
  }
  //equivalent values for every corresponding key, and
  //~~~possibly expensive deep test
  for (i = ka.length - 1; i >= 0; i--) {
    key = ka[i];
    if (!_deepEqual(a[key], b[key])) return false;
  }
  return true;
}

// 8. The non-equivalence assertion tests for any deep inequality.
// assert.notDeepEqual(actual, expected, message_opt);

assert.notDeepEqual = function notDeepEqual(actual, expected, message) {
  if (_deepEqual(actual, expected)) {
    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);
  }
};

// 9. The strict equality assertion tests strict equality, as determined by ===.
// assert.strictEqual(actual, expected, message_opt);

assert.strictEqual = function strictEqual(actual, expected, message) {
  if (actual !== expected) {
    fail(actual, expected, message, '===', assert.strictEqual);
  }
};

// 10. The strict non-equality assertion tests for strict inequality, as
// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);

assert.notStrictEqual = function notStrictEqual(actual, expected, message) {
  if (actual === expected) {
    fail(actual, expected, message, '!==', assert.notStrictEqual);
  }
};

function expectedException(actual, expected) {
  if (!actual || !expected) {
    return false;
  }

  if (Object.prototype.toString.call(expected) == '[object RegExp]') {
    return expected.test(actual);
  } else if (actual instanceof expected) {
    return true;
  } else if (expected.call({}, actual) === true) {
    return true;
  }

  return false;
}

function _throws(shouldThrow, block, expected, message) {
  var actual;

  if (util.isString(expected)) {
    message = expected;
    expected = null;
  }

  try {
    block();
  } catch (e) {
    actual = e;
  }

  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +
            (message ? ' ' + message : '.');

  if (shouldThrow && !actual) {
    fail(actual, expected, 'Missing expected exception' + message);
  }

  if (!shouldThrow && expectedException(actual, expected)) {
    fail(actual, expected, 'Got unwanted exception' + message);
  }

  if ((shouldThrow && actual && expected &&
      !expectedException(actual, expected)) || (!shouldThrow && actual)) {
    throw actual;
  }
}

// 11. Expected to throw an error:
// assert.throws(block, Error_opt, message_opt);

assert.throws = function(block, /*optional*/error, /*optional*/message) {
  _throws.apply(this, [true].concat(pSlice.call(arguments)));
};

// EXTENSION! This is annoying to write outside this module.
assert.doesNotThrow = function(block, /*optional*/message) {
  _throws.apply(this, [false].concat(pSlice.call(arguments)));
};

assert.ifError = function(err) { if (err) {throw err;}};

var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) {
    if (hasOwn.call(obj, key)) keys.push(key);
  }
  return keys;
};

},{"util/":91}],86:[function(require,module,exports){
(function (global){
/*global window, global*/
var util = require("util")
var assert = require("assert")
var now = require("date-now")

var slice = Array.prototype.slice
var console
var times = {}

if (typeof global !== "undefined" && global.console) {
    console = global.console
} else if (typeof window !== "undefined" && window.console) {
    console = window.console
} else {
    console = {}
}

var functions = [
    [log, "log"],
    [info, "info"],
    [warn, "warn"],
    [error, "error"],
    [time, "time"],
    [timeEnd, "timeEnd"],
    [trace, "trace"],
    [dir, "dir"],
    [consoleAssert, "assert"]
]

for (var i = 0; i < functions.length; i++) {
    var tuple = functions[i]
    var f = tuple[0]
    var name = tuple[1]

    if (!console[name]) {
        console[name] = f
    }
}

module.exports = console

function log() {}

function info() {
    console.log.apply(console, arguments)
}

function warn() {
    console.log.apply(console, arguments)
}

function error() {
    console.warn.apply(console, arguments)
}

function time(label) {
    times[label] = now()
}

function timeEnd(label) {
    var time = times[label]
    if (!time) {
        throw new Error("No such label: " + label)
    }

    var duration = now() - time
    console.log(label + ": " + duration + "ms")
}

function trace() {
    var err = new Error()
    err.name = "Trace"
    err.message = util.format.apply(null, arguments)
    console.error(err.stack)
}

function dir(object) {
    console.log(util.inspect(object) + "\n")
}

function consoleAssert(expression) {
    if (!expression) {
        var arr = slice.call(arguments, 1)
        assert.ok(false, util.format.apply(null, arr))
    }
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"assert":85,"date-now":87,"util":91}],87:[function(require,module,exports){
module.exports = now

function now() {
    return new Date().getTime()
}

},{}],88:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}

},{}],89:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};

process.nextTick = (function () {
    var canSetImmediate = typeof window !== 'undefined'
    && window.setImmediate;
    var canMutationObserver = typeof window !== 'undefined'
    && window.MutationObserver;
    var canPost = typeof window !== 'undefined'
    && window.postMessage && window.addEventListener
    ;

    if (canSetImmediate) {
        return function (f) { return window.setImmediate(f) };
    }

    var queue = [];

    if (canMutationObserver) {
        var hiddenDiv = document.createElement("div");
        var observer = new MutationObserver(function () {
            var queueList = queue.slice();
            queue.length = 0;
            queueList.forEach(function (fn) {
                fn();
            });
        });

        observer.observe(hiddenDiv, { attributes: true });

        return function nextTick(fn) {
            if (!queue.length) {
                hiddenDiv.setAttribute('yes', 'no');
            }
            queue.push(fn);
        };
    }

    if (canPost) {
        window.addEventListener('message', function (ev) {
            var source = ev.source;
            if ((source === window || source === null) && ev.data === 'process-tick') {
                ev.stopPropagation();
                if (queue.length > 0) {
                    var fn = queue.shift();
                    fn();
                }
            }
        }, true);

        return function nextTick(fn) {
            queue.push(fn);
            window.postMessage('process-tick', '*');
        };
    }

    return function nextTick(fn) {
        setTimeout(fn, 0);
    };
})();

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};

},{}],90:[function(require,module,exports){
module.exports = function isBuffer(arg) {
  return arg && typeof arg === 'object'
    && typeof arg.copy === 'function'
    && typeof arg.fill === 'function'
    && typeof arg.readUInt8 === 'function';
}
},{}],91:[function(require,module,exports){
(function (process,global){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var formatRegExp = /%[sdj%]/g;
exports.format = function(f) {
  if (!isString(f)) {
    var objects = [];
    for (var i = 0; i < arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(' ');
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (x === '%%') return '%';
    if (i >= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j':
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return '[Circular]';
        }
      default:
        return x;
    }
  });
  for (var x = args[i]; i < len; x = args[++i]) {
    if (isNull(x) || !isObject(x)) {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
};


// Mark that a method should not be used.
// Returns a modified function which warns once by default.
// If --no-deprecation is set, then it is a no-op.
exports.deprecate = function(fn, msg) {
  // Allow for deprecating things in the process of starting up.
  if (isUndefined(global.process)) {
    return function() {
      return exports.deprecate(fn, msg).apply(this, arguments);
    };
  }

  if (process.noDeprecation === true) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (process.throwDeprecation) {
        throw new Error(msg);
      } else if (process.traceDeprecation) {
        console.trace(msg);
      } else {
        console.error(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
};


var debugs = {};
var debugEnviron;
exports.debuglog = function(set) {
  if (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || '';
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp('\\b' + set + '\\b', 'i').test(debugEnviron)) {
      var pid = process.pid;
      debugs[set] = function() {
        var msg = exports.format.apply(exports, arguments);
        console.error('%s %d: %s', set, pid, msg);
      };
    } else {
      debugs[set] = function() {};
    }
  }
  return debugs[set];
};


/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 */
/* legacy: obj, showHidden, depth, colors*/
function inspect(obj, opts) {
  // default options
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  // legacy...
  if (arguments.length >= 3) ctx.depth = arguments[2];
  if (arguments.length >= 4) ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    // legacy...
    ctx.showHidden = opts;
  } else if (opts) {
    // got an "options" object
    exports._extend(ctx, opts);
  }
  // set default options
  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
inspect.colors = {
  'bold' : [1, 22],
  'italic' : [3, 23],
  'underline' : [4, 24],
  'inverse' : [7, 27],
  'white' : [37, 39],
  'grey' : [90, 39],
  'black' : [30, 39],
  'blue' : [34, 39],
  'cyan' : [36, 39],
  'green' : [32, 39],
  'magenta' : [35, 39],
  'red' : [31, 39],
  'yellow' : [33, 39]
};

// Don't use 'blue' not visible on cmd.exe
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  // "name": intentionally not styling
  'regexp': 'red'
};


function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return '\u001b[' + inspect.colors[style][0] + 'm' + str +
           '\u001b[' + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}


function stylizeNoColor(str, styleType) {
  return str;
}


function arrayToHash(array) {
  var hash = {};

  array.forEach(function(val, idx) {
    hash[val] = true;
  });

  return hash;
}


function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (ctx.customInspect &&
      value &&
      isFunction(value.inspect) &&
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &&
      // Also filter out any prototype objects using the circular check.
      !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }

  // Primitive types cannot have properties
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }

  // Look up the keys of the object.
  var keys = Object.keys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  // IE doesn't make error fields non-enumerable
  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
  if (isError(value)
      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {
    return formatError(value);
  }

  // Some type of object without properties can be shortcutted.
  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }
    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '', array = false, braces = ['{', '}'];

  // Make Array say that they are Array
  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  // Make functions say that they are functions
  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  // Make RegExps say that they are RegExps
  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  // Make dates with properties first say the date
  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  // Make error with message first say the error
  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    } else {
      return ctx.stylize('[Object]', 'special');
    }
  }

  ctx.seen.push(value);

  var output;
  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } else {
    output = keys.map(function(key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  return reduceToSingleString(output, base, braces);
}


function formatPrimitive(ctx, value) {
  if (isUndefined(value))
    return ctx.stylize('undefined', 'undefined');
  if (isString(value)) {
    var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '')
                                             .replace(/'/g, "\\'")
                                             .replace(/\\"/g, '"') + '\'';
    return ctx.stylize(simple, 'string');
  }
  if (isNumber(value))
    return ctx.stylize('' + value, 'number');
  if (isBoolean(value))
    return ctx.stylize('' + value, 'boolean');
  // For some reason typeof null is "object", so special case here.
  if (isNull(value))
    return ctx.stylize('null', 'null');
}


function formatError(value) {
  return '[' + Error.prototype.toString.call(value) + ']';
}


function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
  var output = [];
  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          String(i), true));
    } else {
      output.push('');
    }
  }
  keys.forEach(function(key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, true));
    }
  });
  return output;
}


function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize('[Getter/Setter]', 'special');
    } else {
      str = ctx.stylize('[Getter]', 'special');
    }
  } else {
    if (desc.set) {
      str = ctx.stylize('[Setter]', 'special');
    }
  }
  if (!hasOwnProperty(visibleKeys, key)) {
    name = '[' + key + ']';
  }
  if (!str) {
    if (ctx.seen.indexOf(desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }
      if (str.indexOf('\n') > -1) {
        if (array) {
          str = str.split('\n').map(function(line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + str.split('\n').map(function(line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }
  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify('' + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'")
                 .replace(/\\"/g, '"')
                 .replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}


function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') >= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length > 60) {
    return braces[0] +
           (base === '' ? '' : base + '\n ') +
           ' ' +
           output.join(',\n  ') +
           ' ' +
           braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}


// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.
function isArray(ar) {
  return Array.isArray(ar);
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return isObject(re) && objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return isObject(d) && objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return isObject(e) &&
      (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = require('./support/isBuffer');

function objectToString(o) {
  return Object.prototype.toString.call(o);
}


function pad(n) {
  return n < 10 ? '0' + n.toString(10) : n.toString(10);
}


var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
              'Oct', 'Nov', 'Dec'];

// 26 Feb 16:19:34
function timestamp() {
  var d = new Date();
  var time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(':');
  return [d.getDate(), months[d.getMonth()], time].join(' ');
}


// log is just a thin wrapper to console.log that prepends a timestamp
exports.log = function() {
  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
};


/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */
exports.inherits = require('inherits');

exports._extend = function(origin, add) {
  // Don't do anything if add isn't an object
  if (!add || !isObject(add)) return origin;

  var keys = Object.keys(add);
  var i = keys.length;
  while (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  return origin;
};

function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./support/isBuffer":90,"_process":89,"inherits":88}],92:[function(require,module,exports){
/**
*
*	MATRIX-DIAGRAM-SPEC
*
*
*	DESCRIPTION:
*		- JSON specification and validation for matrix diagrams.
*
*
*	NOTES:
*		[1]
*
*
*	TODO:
*		[1]
*
*
*	LICENSE:
*		MIT
*
*	Copyright (c) 2015. Athan Reines.
*
*
*	AUTHOR:
*		Athan Reines. kgryte@gmail.com. 2015.
*
*/

'use strict';

// MODULES //

var validator = require( 'is-my-json-valid' );


// VALIDATOR //

var validate = validator( require( './schema.json' ) );


// TEMPLATE //

var template = JSON.stringify( require( './template.json' ) );


// TEMPLATE //

/**
* METHOD: template()
*	Returns a new configuration template.
*
* @returns {Object} configuration template
*/
validate.template = function() {
	// Create a fresh copy:
	return JSON.parse( template );
}; // end METHOD template()


// EXPORTS //

module.exports = validate;

},{"./schema.json":93,"./template.json":94,"is-my-json-valid":96}],93:[function(require,module,exports){
module.exports={
	"id": "",
	"$schema": "http://json-schema.org/draft-04/schema#",

	"description": "Schema for matrix diagram chart configurations.",

	"type": "object",

	"definitions": {
		"positiveInteger": {
			"type": "integer",
			"minimum": 0
		},
		"stringArray": {
			"description": "an array of strings",
			"type": "array",
			"items": {
				"type": "string"
			},
			"minItems": 0
		},
		"positiveIntegerArray": {
			"description": "an array of positive integers",
			"type": "array",
			"items": {
				"$ref": "#/definitions/positiveInteger"
			},
			"minItems": 0
		},
		"rowArray": {
			"description": "an array of rows",
			"type": "array",
			"items": {
				"type": "array"
			},
			"minItems": 1
		},
		"transformArray": {
			"description": "an array of data transforms",
			"type": "array",
			"items": {
				"$ref": "#/definitions/transform"
			},
			"minItems": 0
		},
		"transform": {
			"description": "schema for data transformations",
			"type": "object",
			"properties": {
				"type": {
					"type": "string"
				}
			},
			"required": [
				"type"
			]
		},
		"dataItem": {
			"description": "a data array item specifying how to access chart data",
			"oneOf": [
				{
					"$ref": "#/definitions/dataInline"
				},
				{
					"$ref": "#/definitions/dataURL"
				},
				{
					"$ref": "#/definitions/dataSource"
				}
			]
		},
		"dataInline": {
			"description": "a data item which includes the raw chart data directly in the chart specification",
			"type": "object",
			"properties": {
				"name": {
					"description": "unique data name",
					"type": "string"
				},
				"description": {
					"description": "description of the data",
					"type": "string"
				},
				"rownames": {
					"description": "a list of row names",
					"$ref": "#/definitions/stringArray"
				},
				"colnames": {
					"description": "a list of column names",
					"$ref": "#/definitions/stringArray"
				},
				"values": {
					"description": "an array of rows containing column values",
					"$ref": "#/definitions/rowArray"
				},
				"transforms": {
					"description": "a list of transformations to apply to the data",
					"$ref": "#/definitions/transformArray"
				}
			},
			"required": [
				"name",
				"rownames",
				"colnames",
				"values"
			]
		},
		"dataURL": {
			"description": "a data item which specifies how to access a remote chart data",
			"type": "object",
			"properties": {
				"name": {
					"description": "unique data name",
					"type": "string"
				},
				"description": {
					"description": "description of the data",
					"type": "string"
				},
				"url": {
					"description": "a URL specifying where to access",
					"type": "string",
					"format": "uri"
				},
				"format": {
					"description": "loaded data formatting",
					"$ref": "#/definitions/dataFormat"
				},
				"transforms": {
					"description": "list of transformations to apply to the data",
					"$ref": "#/definitions/transformArray"
				}
			},
			"required": [
				"name",
				"url"
			]
		},
		"dataSource": {
			"description": "a data item which references another named data item in the chart specification",
			"type": "object",
			"properties": {
				"name": {
					"description": "unique data name",
					"type": "string"
				},
				"description": {
					"description": "description of the data",
					"type": "string"
				},
				"source": {
					"description": "referenced data item name",
					"type": "string"
				},
				"transforms": {
					"description": "list of transformations to apply to the data",
					"$ref": "#/definitions/transformArray"
				}
			},
			"required": [
				"name",
				"source"
			]
		},
		"dataFormat": {
			"description": "schema for describing a loaded data format",
			"type": "object",
			"properties": {
				"type": {
					"description": "specifies the format of the loaded data (needed for proper parsing)",
					"type": "string",
					"enum": [
						"json",
						"csv",
						"tsv"
					]
				},
				"fields": {
					"description": "for JSON data, maps a JSON path to canonical data fields (if not provided, will assume that the JSON path directly corresponds to the canonical fields)",
					"type": "object",
					"properties": {
						"rownames": {
							"type": "string"
						},
						"colnames": {
							"type": "string"
						},
						"values": {
							"type": "string"
						}
					}
				}
			},
			"required": [
				"type"
			]
		},
		"layoutNullable": {
			"description": "layout settings set to null should be computed by the chart generator",
			"oneOf": [
				{
					"$ref": "#/definitions/positiveInteger"
				},
				{
					"type": "null"
				}
			]
		},
		"nullOrNumber": {
			"type": [
				"null",
				"number"
			]
		},
		"xScale": {
			"description": "schema which specifies how to map column data to pixel values",
			"type": "object",
			"properties": {
				"type": {
					"description": "specifies the scale type (ordinal)",
					"enum": [ "ordinal" ]
				},
				"description": {
					"description": "scale description",
					"type": "string"
				},
				"domain": {
					"description": "list of column indices defining the column order",
					"$ref": "#/definitions/positiveIntegerArray"
				},
				"range": {
					"description": "pixel range to which columns are mapped (the full width)",
					"enum": [ "width" ]
				}
			},
			"required": [
				"type",
				"domain",
				"range"
			]
		},
		"yScale": {
			"description": "schema which specifies how to map rows to pixel values",
			"type": "object",
			"properties": {
				"type": {
					"description": "specifies the scale type (ordinal)",
					"enum": [ "ordinal" ]
				},
				"description": {
					"description": "scale description",
					"type": "string"
				},
				"domain": {
					"description": "list of row indices defining the row order",
					"$ref": "#/definitions/positiveIntegerArray"
				},
				"range": {
					"description": "pixel range to which rows are mapped (the full height)",
					"enum": [ "height" ]
				}
			},
			"required": [
				"type",
				"domain",
				"range"
			]
		},
		"zScale": {
			"description": "schema which specifies how to map data values to fill opacities",
			"type": "object",
			"properties": {
				"type": {
					"description": "specifies the scale type (linear)",
					"enum": [ "linear" ]
				},
				"description": {
					"description": "scale description",
					"type": "string"
				},
				"domain": {
					"description": "specifies the scale domain (min and max values)",
					"type": "object",
					"properties": {
						"min": {
							"description": "minimum data value limit; if `null`, automatically calculated from data values",
							"$ref": "#/definitions/nullOrNumber"
						},
						"max": {
							"description": "maximum data value limit; if `null`, automatically calculated from data values",
							"$ref": "#/definitions/nullOrNumber"
						}
					},
					"required": [
						"min",
						"max"
					]
				},
				"range": {
					"description": "specifies the range of allowed fill opacity values",
					"type": "object",
					"properties": {
						"min": {
							"description": "minimum fill opacity",
							"type": "number",
							"minimum": 0,
							"maximum": 1
						},
						"max": {
							"description": "maximum fill opacity",
							"type": "number",
							"minimum": 0,
							"maximum": 1
						}
					},
					"required": [
						"min",
						"max"
					]
				}
			},
			"required": [
				"type",
				"domain",
				"range"
			]
		},
		"colorScale": {
			"description": "specifies how to map data values to colors",
			"type": "object",
			"properties": {
				"type": {
					"description": "specifies the scale type (ordinal)",
					"enum": [ "ordinal" ]
				},
				"description": {
					"description": "scale description",
					"type": "string"
				},
				"domain": {
					"description": "specifies the scale domain",
					"type": "array"
				},
				"range": {
					"description": "list of possible colors to which data values may be mapped",
					"$ref": "#/definitions/stringArray"
				}
			},
			"required": [
				"type",
				"domain",
				"range"
			]
		},
		"axis": {
			"description": "chart axis schema",
			"type": "object",
			"properties": {
				"scale": {
					"description": "name of corresponding scale",
					"type": "string"
				},
				"label": {
					"description": "axis label",
					"type": "string"
				}
			},
			"required": [
				"scale",
				"label"
			]
		},
		"associatedData": {
			"description": "associated data source",
			"type": "object",
			"properties": {
				"name": {
					"description": "unique data name which references the associated data source",
					"type": "string"
				},
				"transforms": {
					"description": "list of data transformations to apply to the data",
					"$ref": "#/definitions/transformArray"
				}
			},
			"required": [
				"name"
			]
		},
		"mark": {
			"description": "visual encoding associated with chart data",
			"oneOf": [
				{
					"$ref": "#/definitions/rect"
				}
			]
		},
		"rect": {
			"description": "rectangle visual encoding",
			"type": "object",
			"properties": {
				"name": {
					"description": "unique mark name",
					"type": "string"
				},
				"type": {
					"description": "mark type (rect)",
					"enum": [ "rect" ]
				},
				"description": {
					"description": "mark description",
					"type": "string"
				},
				"data": {
					"description": "specifies the data associated with the visual encoding",
					"$ref": "#/definitions/associatedData"
				},
				"properties": {
					"description": "specifies associated rectangle properties",
					"type": "object",
					"properties": {
						"fill": {
							"description": "rectangle fill color",
							"type": "object",
							"properties": {
								"scale": {
									"description": "associated scale (color)",
									"enum": [ "color" ]
								},
								"field": {
									"description": "specifies the datum field to map to a fill color",
									"type": [
										"string",
										"number",
										"null"
									]
								}
							},
							"required": [
								"scale",
								"field"
							]
						},
						"fillOpacity": {
							"description": "rectangle fill-opacity",
							"type": "object",
							"properties": {
								"scale": {
									"description": "associated scale (z)",
									"enum": [ "z" ]
								},
								"field": {
									"description": "specifies the datum field to map to a fill-opacity",
									"type": [
										"string",
										"number",
										"null"
									]
								}
							},
							"required": [
								"scale",
								"field"
							]
						}
					},
					"required": [
						"fill",
						"fillOpacity"
					]
				}
			},
			"required": [
				"type",
				"data",
				"properties"
			]
		},
		"brush": {
			"description": "schema for a chart brush",
			"type": "object",
			"properties": {
				"description": {
					"description": "brush description",
					"type": "string"
				},
				"data": {
					"description": "brush data",
					"$ref": "#/definitions/associatedData"
				}
			},
			"required": [ "data" ]
		}
	},

	"properties": {
		"name": {
			"description": "unique chart specification name",
			"type": "string"
		},
		"type": {
			"description": "chart specification type (matrix-diagram)",
			"enum": [ "matrix-diagram" ]
		},
		"meta": {
			"description": "associated chart meta data which aids in the contextual understanding of the chart",
			"type": "object",
			"properties": {
				"title": {
					"description": "chart title",
					"type": "string"
				},
				"description": {
					"description": "chart description",
					"type": "string"
				}
			}
		},
		"data": {
			"description": "list of chart data sources",
			"type": "array",
			"items": {
				"description": "data source",
				"$ref": "#/definitions/dataItem"
			},
			"minItems": 1
		},
		"canvas": {
			"description": "schema for chart layout settings",
			"type": "object",
			"properties": {
				"width": {
					"description": "chart width; if `null`, should be calculated by chart generator based on parent dimensions",
					"$ref": "#/definitions/layoutNullable"
				},
				"height": {
					"description": "chart height; if `null`, should be calculated by chart generator based on parent dimensions",
					"$ref": "#/definitions/layoutNullable"
				},
				"padding": {
					"description": "chart padding; i.e., the distance between the canvas edge and graphical elements",
					"type": "object",
					"properties": {
						"left": {
							"description": "left padding; if `null`, should be determined by chart generator based on row name length, existence of a y-label, et cetera",
							"$ref": "#/definitions/layoutNullable"
						},
						"right": {
							"description": "right padding; if `null`, should be determined by chart generator",
							"$ref": "#/definitions/layoutNullable"
						},
						"top": {
							"description": "top padding; if `null`, should be determined by chart generator based on column name length, existence of an x-label, et cetera",
							"$ref": "#/definitions/layoutNullable"
						},
						"bottom": {
							"description": "bottom padding; if `null`, should be determined by chart generator based on existence of legend entries and other chart elements",
							"$ref": "#/definitions/layoutNullable"
						}
					},
					"required": [
						"left",
						"right",
						"top",
						"bottom"
					]
				}
			},
			"required": [
				"width",
				"height",
				"padding"
			]
		},
		"scales": {
			"description": "schema for chart scales",
			"type": "object",
			"properties": {
				"x": {
					"description": "scale mapping columns to pixel values",
					"$ref": "#/definitions/xScale"
				},
				"y": {
					"description": "scale mapping rows to pixel values",
					"$ref": "#/definitions/yScale"
				},
				"z": {
					"description": "scale mapping data values to fill opacities",
					"$ref": "#/definitions/zScale"
				},
				"color": {
					"description": "scale mapping data values to fill colors",
					"$ref": "#/definitions/colorScale"
				}
			},
			"required": [
				"x",
				"y",
				"z",
				"color"
			]
		},
		"axes": {
			"description": "schema for chart axes",
			"type": "object",
			"properties": {
				"x": {
					"description": "x-axis",
					"$ref": "#/definitions/axis"
				},
				"y": {
					"description": "y-axis",
					"$ref": "#/definitions/axis"
				}
			},
			"required": [
				"x",
				"y"
			]
		},
		"marks": {
			"description": "schema for visual encodings associated with chart data",
			"type": "array",
			"items": {
				"$ref": "#/definitions/mark"
			},
			"minItems": 1
		},
		"legend": {
			"description": "schema for legend entries",
			"type": "object",
			"properties": {
				"fill": {
					"description": "legend entry for fill color",
					"type": "object",
					"properties": {
						"label": {
							"description": "entry label",
							"type": "string"
						}
					},
					"required": [ "label" ]
				},
				"fillOpacity": {
					"description": "legend entry for fill opacity",
					"type": "object",
					"properties": {
						"label": {
							"description": "entry label",
							"type": "string"
						}
					},
					"required": [ "label" ]
				}
			},
			"required": [
				"fill",
				"fillOpacity"
			]
		},
		"brushes": {
			"description": "schema for chart brushes",
			"type": "object",
			"properties": {
				"x": {
					"description": "x-axis brush",
					"$ref": "#/definitions/brush"
				},
				"y": {
					"description": "y-axis brush",
					"$ref": "#/definitions/brush"
				}
			}
		},
		"settings": {
			"description": "schema for chart generator settings",
			"type": "object",
			"properties": {
				"autoResize": {
					"description": "specifies if a chart should automatically resize whenever the window resizes",
					"type": "boolean"
				},
				"autoUpdate": {
					"description": "specifies if a chart should update whenever a chart setting changes",
					"type": "boolean"
				},
				"transitions": {
					"description": "schema for transition settings",
					"type": "object",
					"properties": {
						"duration": {
							"description": "transition duration in milliseconds",
							"type": "number"
						}
					}
				},
				"interactions": {
					"description": "schema for interaction settings",
					"type": "object",
					"properties": {
						"brushable": {
							"description": "specifies if a chart should be brushable",
							"type": "boolean"
						},
						"brushableRows": {
							"description": "specifies if a chart should have a brushable y-axis",
							"type": "boolean"
						},
						"brushableCols": {
							"description": "specifies if a chart should have a brushable x-axis",
							"type": "boolean"
						},
						"sortableRows": {
							"description": "specifies if a chart should have sortable rows",
							"type": "boolean"
						},
						"sortableCols": {
							"description": "specifies if a chart should have sortable columns",
							"type": "boolean"
						},
						"resizable": {
							"description": "specifies if a chart can be resized manually",
							"type": "boolean"
						}
					}
				}
			}
		}
	},

	"required": [
		"name",
		"type",
		"meta",
		"data",
		"canvas",
		"scales",
		"axes",
		"marks",
		"legend"
	]
}

},{}],94:[function(require,module,exports){
module.exports={
	"name": "",
	"type": "matrix-diagram",
	"meta": {
		"title": "",
		"description": ""
	},
	"data": [
		{
			"name": "",
			"description": "",
			"rownames": [],
			"colnames": [],
			"values": [[]]
		}
	],
	"canvas": {
		"width": null,
		"height": null,
		"padding": {
			"left": null,
			"right": null,
			"top": null,
			"bottom": null
		}
	},
	"scales": {
		"x": {
			"type": "ordinal",
			"description": "",
			"domain": [],
			"range": "width"
		},
		"y": {
			"type": "ordinal",
			"description": "",
			"domain": [],
			"range": "height"
		},
		"z": {
			"type": "linear",
			"description": "",
			"domain": {
				"min": null,
				"max": null
			},
			"range": {
				"min": 0,
				"max": 1
			}
		},
		"color": {
			"type": "ordinal",
			"description": "",
			"domain": [],
			"range": []
		}
	},
	"axes": {
		"x": {
			"scale": "x",
			"label": ""
		},
		"y": {
			"scale": "y",
			"label": ""
		}
	},
	"marks": [
		{
			"name": "",
			"type": "rect",
			"description": "",
			"data": {
				"name": ""
			},
			"properties": {
				"fill": {
					"scale": "color",
					"field": null
				},
				"fillOpacity": {
					"scale": "z",
					"field": null
				}
			}
		}
	],
	"legend": {
		"fill": {
			"label": ""
		},
		"fillOpacity": {
			"label": ""
		}
	},
	"brushes": {
		"x": {
			"description": "",
			"data": {
				"name": ""
			}
		},
		"y": {
			"description": "",
			"data": {
				"name": ""
			}
		}
	},
	"settings": {
		"autoResize": true,
		"autoUpdate": true,
		"transitions": {
			"duration": 2500
		},
		"interactions": {
			"brushable": false,
			"brushableRows": false,
			"brushableCols": false,
			"sortableRows": false,
			"sortableCols": false,
			"resizable": false
		}
	}
}

},{}],95:[function(require,module,exports){
exports['date-time'] = /^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(\.\d+)?([zZ]|[+-]\d{2}:\d{2})$/
exports['date'] = /^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/
exports['time'] = /^\d{2}:\d{2}:\d{2}$/
exports['email'] = /^\S+@\S+$/
exports['ip-address'] = exports['ipv4'] = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/
exports['ipv6'] = /^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/
exports['uri'] = /^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/
exports['color'] = /(#?([0-9A-Fa-f]{3,6})\b)|(aqua)|(black)|(blue)|(fuchsia)|(gray)|(green)|(lime)|(maroon)|(navy)|(olive)|(orange)|(purple)|(red)|(silver)|(teal)|(white)|(yellow)|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\))/
exports['hostname'] = /^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/
exports['alpha'] = /^[a-zA-Z]+$/
exports['alphanumeric'] = /^[a-zA-Z0-9]+$/
exports['style'] = /\s*(.+?):\s*([^;]+);?/g
exports['phone'] = /^\+(?:[0-9] ?){6,14}[0-9]$/
exports['utc-millisec'] = /^[0-9]+(\.?[0-9]+)?$/

},{}],96:[function(require,module,exports){
var genobj = require('generate-object-property')
var genfun = require('generate-function')
var jsonpointer = require('jsonpointer')
var xtend = require('xtend')
var formats = require('./formats')

var get = function(obj, additionalSchemas, ptr) {
  if (/^https?:\/\//.test(ptr)) return null

  var visit = function(sub) {
    if (sub && sub.id === ptr) return sub
    if (typeof sub !== 'object' || !sub) return null
    return Object.keys(sub).reduce(function(res, k) {
      return res || visit(sub[k])
    }, null)
  }

  var res = visit(obj)
  if (res) return res

  ptr = ptr.replace(/^#/, '')
  ptr = ptr.replace(/\/$/, '')

  try {
    return jsonpointer.get(obj, decodeURI(ptr))
  } catch (err) {
    var other = additionalSchemas[ptr] || additionalSchemas[ptr.replace(/^#/, '')]
    return other || null
  }
}

var formatName = function(field) {
  return field.replace(/\[[^\]]+\]/g, '.*')
}

var types = {}

types.any = function() {
  return 'true'
}

types.null = function(name) {
  return name+' === null'
}

types.boolean = function(name) {
  return 'typeof '+name+' === "boolean"'
}

types.array = function(name) {
  return 'Array.isArray('+name+')'
}

types.object = function(name) {
  return 'typeof '+name+' === "object" && '+name+' && !Array.isArray('+name+')'
}

types.number = function(name) {
  return 'typeof '+name+' === "number"'
}

types.integer = function(name) {
  return 'typeof '+name+' === "number" && (('+name+' | 0) === '+name+' || '+name+' > 9007199254740992 || '+name+' < -9007199254740992)'
}

types.string = function(name) {
  return 'typeof '+name+' === "string"'
}

var unique = function(array) {
  var list = []
  for (var i = 0; i < array.length; i++) {
    list.push(typeof array[i] === 'object' ? JSON.stringify(array[i]) : array[i])
  }
  for (var i = 1; i < list.length; i++) {
    if (list.indexOf(list[i]) !== i) return false
  }
  return true
}

var toType = function(node) {
  return node.type
}

var compile = function(schema, cache, root, reporter, opts) {
  var fmts = opts ? xtend(formats, opts.formats) : formats
  var scope = {unique:unique, formats:fmts}

  var syms = {}
  var gensym = function(name) {
    return name+(syms[name] = (syms[name] || 0)+1)
  }

  var reversePatterns = {}
  var patterns = function(p) {
    if (reversePatterns[p]) return reversePatterns[p]
    var n = gensym('pattern')
    scope[n] = new RegExp(p)
    reversePatterns[p] = n
    return n
  }

  var vars = ['i','j','k','l','m','n','o','p','q','r','s','t','u','v','x','y','z']
  var genloop = function() {
    var v = vars.shift()
    vars.push(v+v[0])
    return v
  }

  var visit = function(name, node, reporter) {
    var properties = node.properties
    var type = node.type
    var tuple = false

    if (Array.isArray(node.items)) { // tuple type
      properties = {}
      node.items.forEach(function(item, i) {
        properties[i] = item
      })
      type = 'array'
      tuple = true
    }

    var indent = 0
    var error = function(msg) {
      if (reporter === false) {
        validate('errors++')
        return
      }

      var n = gensym('error')
      scope[n] = {field:formatName(name), message:msg}
      validate
        ('errors++')
        ('if (validate.errors === null) validate.errors = []')
        ('validate.errors.push(%s)', n)
    }

    if (node.required === true) {
      indent++
      validate('if (%s === undefined) {', name)
      error('is required')
      validate('} else {')
    } else {
      indent++
      validate('if (%s !== undefined) {', name)
    }

    var valid = [].concat(type)
      .map(function(t) {
        return types[t || 'any'](name)
      })
      .join(' || ') || 'true'

    if (valid !== 'true') {
      indent++
      validate('if (!(%s)) {', valid)
      error('is the wrong type')
      validate('} else {')
    }

    if (tuple) {
      if (node.additionalItems === false) {
        validate('if (%s.length > %d) {', name, node.items.length)
        error('has additional items')
        validate('}')
      } else if (node.additionalItems) {
        var i = genloop()
        validate('for (var %s = %d; %s < %s.length; %s++) {', i, node.items.length, i, name, i)
        visit(name+'['+i+']', node.additionalItems, reporter)
        validate('}')
      }   
    }

    if (node.format && fmts[node.format]) {
      var n = gensym('format')
      scope[n] = fmts[node.format]

      if (typeof scope[n] === 'function') validate('if (!%s(%s)) {', n, name)
      else validate('if (!%s.test(%s)) {', n, name)
      error('must be '+node.format+' format')
      validate('}')
    }

    if (Array.isArray(node.required)) {
      var isUndefined = function(req) {
        return genobj(name, req) + ' === undefined'
      }

      validate('if ((%s) && (%s)) {', type !== 'object' ? types.object(name) : 'true', node.required.map(isUndefined).join(' || ') || 'false')
      error('missing required properties')
      validate('} else {')
      indent++
    }

    if (node.uniqueItems) {
      if (type !== 'array') validate('if (%s) {', types.array(name))
      validate('if (!(unique(%s))) {', name)
      error('must be unique')
      validate('}')
      if (type !== 'array') validate('}')
    }

    if (node.enum) {
      var complex = node.enum.some(function(e) {
        return typeof e === 'object'
      })

      var compare = complex ?
        function(e) {
          return 'JSON.stringify('+name+')'+' !== JSON.stringify('+JSON.stringify(e)+')'
        } :
        function(e) {
          return name+' !== '+JSON.stringify(e)
        }

      validate('if (%s) {', node.enum.map(compare).join(' && ') || 'false')
      error('must be an enum value')
      validate('}')
    }

    if (node.dependencies) {
      if (type !== 'object') validate('if (%s) {', types.object(name))

      Object.keys(node.dependencies).forEach(function(key) {
        var deps = node.dependencies[key]
        if (typeof deps === 'string') deps = [deps]

        var exists = function(k) {
          return genobj(name, k) + ' !== undefined'
        }

        if (Array.isArray(deps)) {
          validate('if (%s !== undefined && !(%s)) {', genobj(name, key), deps.map(exists).join(' && ') || 'true')
          error('dependencies not set')
          validate('}')
        }
        if (typeof deps === 'object') {
          validate('if (%s !== undefined) {', genobj(name, key))
          visit(name, deps, reporter)
          validate('}')
        }
      })

      if (type !== 'object') validate('}')
    }

    if (node.additionalProperties || node.additionalProperties === false) {
      if (type !== 'object') validate('if (%s) {', types.object(name))

      var i = genloop()
      var keys = gensym('keys')

      var toCompare = function(p) {
        return keys+'['+i+'] !== '+JSON.stringify(p)
      }

      var toTest = function(p) {
        return '!'+patterns(p)+'.test('+keys+'['+i+'])'
      }

      var additionalProp = Object.keys(properties || {}).map(toCompare)
        .concat(Object.keys(node.patternProperties || {}).map(toTest))
        .join(' && ') || 'true'

      validate('var %s = Object.keys(%s)', keys, name)
        ('for (var %s = 0; %s < %s.length; %s++) {', i, i, keys, i)
          ('if (%s) {', additionalProp)

      if (node.additionalProperties === false) {
        error('has additional properties')
      } else {
        visit(name+'['+keys+'['+i+']]', node.additionalProperties, reporter)
      }

      validate
          ('}')
        ('}')

      if (type !== 'object') validate('}')
    }

    if (node.$ref) {
      var sub = get(root, opts && opts.schemas || {}, node.$ref)
      if (sub) {
        var fn = cache[node.$ref]
        if (!fn) {
          cache[node.$ref] = function proxy(data) {
            return fn(data)
          }
          fn = compile(sub, cache, root, false, opts)
        }
        var n = gensym('ref')
        scope[n] = fn
        validate('if (!(%s(%s))) {', n, name)
        error('referenced schema does not match')
        validate('}')
      }
    }

    if (node.not) {
      var prev = gensym('prev')
      validate('var %s = errors', prev)
      visit(name, node.not, false)
      validate('if (%s === errors) {', prev)
      error('negative schema matches')
      validate('} else {')
        ('errors = %s', prev)
      ('}')
    }

    if (node.items && !tuple) {
      if (type !== 'array') validate('if (%s) {', types.array(name))

      var i = genloop()
      validate('for (var %s = 0; %s < %s.length; %s++) {', i, i, name, i)
      visit(name+'['+i+']', node.items, reporter)
      validate('}')

      if (type !== 'array') validate('}')
    }

    if (node.patternProperties) {
      if (type !== 'object') validate('if (%s) {', types.object(name))
      var keys = gensym('keys')
      var i = genloop()
      validate
        ('var %s = Object.keys(%s)', keys, name)
        ('for (var %s = 0; %s < %s.length; %s++) {', i, i, keys, i)

      Object.keys(node.patternProperties).forEach(function(key) {
        var p = patterns(key)
        validate('if (%s.test(%s)) {', p, keys+'['+i+']')
        visit(name+'['+keys+'['+i+']]', node.patternProperties[key], reporter)
        validate('}')
      })

      validate('}')
      if (type !== 'object') validate('}')
    }

    if (node.pattern) {
      var p = patterns(node.pattern)
      if (type !== 'string') validate('if (%s) {', types.string(name))
      validate('if (!(%s.test(%s))) {', p, name)
      error('pattern mismatch')
      validate('}')
      if (type !== 'string') validate('}')
    }

    if (node.allOf) {
      node.allOf.forEach(function(sch) {
        visit(name, sch, reporter)
      })
    }

    if (node.anyOf && node.anyOf.length) {
      var prev = gensym('prev')

      node.anyOf.forEach(function(sch, i) {
        if (i === 0) {
          validate('var %s = errors', prev)
        } else {          
          validate('if (errors !== %s) {', prev)
            ('errors = %s', prev)
        }
        visit(name, sch, false)
      })
      node.anyOf.forEach(function(sch, i) {
        if (i) validate('}')
      })
      validate('if (%s !== errors) {', prev)
      error('no schemas match')
      validate('}')
    }

    if (node.oneOf && node.oneOf.length) {
      var prev = gensym('prev')
      var passes = gensym('passes')

      validate
        ('var %s = errors', prev)
        ('var %s = 0', passes)

      node.oneOf.forEach(function(sch, i) {
        visit(name, sch, false)
        validate('if (%s === errors) {', prev)
          ('%s++', passes)
        ('} else {')
          ('errors = %s', prev)
        ('}')
      })

      validate('if (%s !== 1) {', passes)
      error('no (or more than one) schemas match')
      validate('}')
    }

    if (node.multipleOf !== undefined) {
      if (type !== 'number' && type !== 'integer') validate('if (%s) {', types.number(name))

      var factor = ((node.multipleOf | 0) !== node.multipleOf) ? Math.pow(10, node.multipleOf.toString().split('.').pop().length) : 1
      if (factor > 1) validate('if ((%d*%s) % %d) {', factor, name, factor*node.multipleOf)
      else validate('if (%s % %d) {', name, node.multipleOf)

      error('has a remainder')
      validate('}')

      if (type !== 'number' && type !== 'integer') validate('}')
    }

    if (node.maxProperties !== undefined) {
      if (type !== 'object') validate('if (%s) {', types.object(name))
      
      validate('if (Object.keys(%s).length > %d) {', name, node.maxProperties)
      error('has more properties than allowed')
      validate('}')

      if (type !== 'object') validate('}')
    }

    if (node.minProperties !== undefined) {
      if (type !== 'object') validate('if (%s) {', types.object(name))
      
      validate('if (Object.keys(%s).length < %d) {', name, node.minProperties)
      error('has less properties than allowed')
      validate('}')

      if (type !== 'object') validate('}')
    }

    if (node.maxItems !== undefined) {
      if (type !== 'array') validate('if (%s) {', types.array(name))
      
      validate('if (%s.length > %d) {', name, node.maxItems)
      error('has more items than allowed')
      validate('}')

      if (type !== 'array') validate('}')
    }

    if (node.minItems !== undefined) {
      if (type !== 'array') validate('if (%s) {', types.array(name))
      
      validate('if (%s.length < %d) {', name, node.minItems)
      error('has less items than allowed')
      validate('}')

      if (type !== 'array') validate('}')
    }

    if (node.maxLength !== undefined) {
      if (type !== 'string') validate('if (%s) {', types.string(name))

      validate('if (%s.length > %d) {', name, node.maxLength)
      error('has longer length than allowed')
      validate('}')

      if (type !== 'string') validate('}')
    }

    if (node.minLength !== undefined) {
      if (type !== 'string') validate('if (%s) {', types.string(name))

      validate('if (%s.length < %d) {', name, node.minLength)
      error('has less length than allowed')
      validate('}')

      if (type !== 'string') validate('}')
    }

    if (node.minimum !== undefined) {
      validate('if (%s %s %d) {', name, node.exclusiveMinimum ? '<=' : '<', node.minimum)
      error('is less than minimum')
      validate('}')
    }

    if (node.maximum !== undefined) {
      validate('if (%s %s %d) {', name, node.exclusiveMaximum ? '>=' : '>', node.maximum)
      error('is more than maximum')
      validate('}')
    }

    if (properties) {
      Object.keys(properties).forEach(function(p) {
        visit(genobj(name, p), properties[p], reporter)
      })
    }

    while (indent--) validate('}')
  }

  var validate = genfun
    ('function validate(data) {')
      ('validate.errors = null')
      ('var errors = 0')

  visit('data', schema, reporter)

  validate
      ('return errors === 0')
    ('}')

  validate = validate.toFunction(scope)
  validate.errors = null

  validate.__defineGetter__('error', function() {
    if (!validate.errors) return ''
    return validate.errors
      .map(function(err) {
        return err.field+' '+err.message
      })
      .join('\n')
  })

  validate.toJSON = function() {
    return schema
  }

  return validate
}

module.exports = function(schema, opts) {
  if (typeof schema === 'string') schema = JSON.parse(schema)
  return compile(schema, {}, schema, true, opts)
}
},{"./formats":95,"generate-function":97,"generate-object-property":98,"jsonpointer":100,"xtend":101}],97:[function(require,module,exports){
var util = require('util')

var INDENT_START = /[\{\[]/
var INDENT_END = /[\}\]]/

module.exports = function() {
  var lines = []
  var indent = 0

  var push = function(str) {
    var spaces = ''
    while (spaces.length < indent*2) spaces += '  '
    lines.push(spaces+str)
  }

  var line = function(fmt) {
    if (!fmt) return line

    if (INDENT_END.test(fmt.trim()[0]) && INDENT_START.test(fmt[fmt.length-1])) {
      indent--
      push(util.format.apply(util, arguments))
      indent++
      return line
    }
    if (INDENT_START.test(fmt[fmt.length-1])) {
      push(util.format.apply(util, arguments))
      indent++
      return line
    }
    if (INDENT_END.test(fmt.trim()[0])) {
      indent--
      push(util.format.apply(util, arguments))
      return line
    }

    push(util.format.apply(util, arguments))
    return line
  }

  line.toString = function() {
    return lines.join('\n')
  }

  line.toFunction = function(scope) {
    var src = 'return ('+line.toString()+')'

    var keys = Object.keys(scope || {}).map(function(key) {
      return key
    })

    var vals = keys.map(function(key) {
      return scope[key]
    })

    return Function.apply(null, keys.concat(src)).apply(null, vals)
  }

  if (arguments.length) line.apply(null, arguments)

  return line
}

},{"util":91}],98:[function(require,module,exports){
var isProperty = require('is-property')

var gen = function(obj, prop) {
  return isProperty(prop) ? obj+'.'+prop : obj+'['+JSON.stringify(prop)+']'
}

gen.valid = isProperty
module.exports = gen
},{"is-property":99}],99:[function(require,module,exports){
"use strict"
function isProperty(str) {
  return /^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(str)
}
module.exports = isProperty
},{}],100:[function(require,module,exports){
var console = require("console");

var untilde = function(str) {
  return str.replace(/~./g, function(m) {
    switch (m) {
      case "~0":
        return "~";
      case "~1":
        return "/";
    }
    throw("Invalid tilde escape: " + m);
  });
}

var traverse = function(obj, pointer, value) {
  // assert(isArray(pointer))
  var part = untilde(pointer.shift());
  if(typeof obj[part] === "undefined") {
    throw("Value for pointer '" + pointer + "' not found.");
    return;
  }
  if(pointer.length !== 0) { // keep traversin!
    return traverse(obj[part], pointer, value);
  }
  // we're done
  if(typeof value === "undefined") {
    // just reading
    return obj[part];
  }
  // set new value, return old value
  var old_value = obj[part];
  if(value === null) {
    delete obj[part];
  } else {
    obj[part] = value;
  }
  return old_value;
}

var validate_input = function(obj, pointer) {
  if(typeof obj !== "object") {
    throw("Invalid input object.");
  }

  if(pointer === "") {
    return [];
  }

  if(!pointer) {
    throw("Invalid JSON pointer.");
  }

  pointer = pointer.split("/");
  var first = pointer.shift();
  if (first !== "") {
    throw("Invalid JSON pointer.");
  }

  return pointer;
}

var get = function(obj, pointer) {
  pointer = validate_input(obj, pointer);
  if (pointer.length === 0) {
    return obj;
  }
  return traverse(obj, pointer);
}

var set = function(obj, pointer, value) {
  pointer = validate_input(obj, pointer);
  if (pointer.length === 0) {
    throw("Invalid JSON pointer for set.")
  }
  return traverse(obj, pointer, value);
}

exports.get = get
exports.set = set

},{"console":86}],101:[function(require,module,exports){
module.exports = extend

function extend() {
    var target = {}

    for (var i = 0; i < arguments.length; i++) {
        var source = arguments[i]

        for (var key in source) {
            if (source.hasOwnProperty(key)) {
                target[key] = source[key]
            }
        }
    }

    return target
}

},{}]},{},[37]);
</script>

</polymer-element>
</body></html>